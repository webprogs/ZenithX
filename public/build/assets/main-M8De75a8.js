import{r as m,j as e,R as we,F as Fe,a as js,b as ze,c as gs,d as Je,e as Me,f as Ws,g as Re,h as Pe,i as bs,k as ee,l as Qs,m as Ne,n as vs,o as Ye,p as ve,q as Vs,s as ys,t as Ns,u as pe,v as fe,w as ws,x as je,y as ce,z as oe,K as Hs,A as Gs,O as as,B as Ks,Q as Xs,C as Le,D as Qe,E as De,G as Zs,H as Ee,I as _s,J as Js,L as rs,M as Ys,N as _e,P as et,S as st,T as tt,U as at,V as Ss,W as Cs,X as ks,Y as Fs,Z as rt,_ as nt,$ as it}from"./react-vendor-Cohw-MQ-.js";import{c as he,z as v,F as lt}from"./ui-utils-BLMQEj-g.js";import{a as ct}from"./http-B9ygI19o.js";import{u as ot,N as be,a as dt,b as de,O as Rs,L as me,c as Ps,d as qe,R as mt,e as U,B as xt}from"./router-Bb_Ho9YW.js";import{o as ae,s as E,u as Y,a as te,n as ye,_ as As,b as ht,l as Oe}from"./forms-6F8fWYts.js";/* empty css            */var $e=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ut={setTimeout:(s,t)=>setTimeout(s,t),clearTimeout:s=>clearTimeout(s),setInterval:(s,t)=>setInterval(s,t),clearInterval:s=>clearInterval(s)},pt=class{#e=ut;#s=!1;setTimeoutProvider(s){this.#e=s}setTimeout(s,t){return this.#e.setTimeout(s,t)}clearTimeout(s){this.#e.clearTimeout(s)}setInterval(s,t){return this.#e.setInterval(s,t)}clearInterval(s){this.#e.clearInterval(s)}},He=new pt;function ft(s){setTimeout(s,0)}var Ue=typeof window>"u"||"Deno"in globalThis;function le(){}function jt(s,t){return typeof s=="function"?s(t):s}function gt(s){return typeof s=="number"&&s>=0&&s!==1/0}function bt(s,t){return Math.max(s+(t||0)-Date.now(),0)}function Ge(s,t){return typeof s=="function"?s(t):s}function vt(s,t){return typeof s=="function"?s(t):s}function ns(s,t){const{type:a="all",exact:r,fetchStatus:n,predicate:i,queryKey:x,stale:c}=s;if(x){if(r){if(t.queryHash!==es(x,t.options))return!1}else if(!Ce(t.queryKey,x))return!1}if(a!=="all"){const j=t.isActive();if(a==="active"&&!j||a==="inactive"&&j)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||n&&n!==t.state.fetchStatus||i&&!i(t))}function is(s,t){const{exact:a,status:r,predicate:n,mutationKey:i}=s;if(i){if(!t.options.mutationKey)return!1;if(a){if(Se(t.options.mutationKey)!==Se(i))return!1}else if(!Ce(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||n&&!n(t))}function es(s,t){return(t?.queryKeyHashFn||Se)(s)}function Se(s){return JSON.stringify(s,(t,a)=>Ke(a)?Object.keys(a).sort().reduce((r,n)=>(r[n]=a[n],r),{}):a)}function Ce(s,t){return s===t?!0:typeof s!=typeof t?!1:s&&t&&typeof s=="object"&&typeof t=="object"?Object.keys(t).every(a=>Ce(s[a],t[a])):!1}var yt=Object.prototype.hasOwnProperty;function Is(s,t,a=0){if(s===t)return s;if(a>500)return t;const r=ls(s)&&ls(t);if(!r&&!(Ke(s)&&Ke(t)))return t;const i=(r?s:Object.keys(s)).length,x=r?t:Object.keys(t),c=x.length,j=r?new Array(c):{};let o=0;for(let u=0;u<c;u++){const N=r?u:x[u],y=s[N],g=t[N];if(y===g){j[N]=y,(r?u<i:yt.call(s,N))&&o++;continue}if(y===null||g===null||typeof y!="object"||typeof g!="object"){j[N]=g;continue}const p=Is(y,g,a+1);j[N]=p,p===y&&o++}return i===c&&o===i?s:j}function ls(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function Ke(s){if(!cs(s))return!1;const t=s.constructor;if(t===void 0)return!0;const a=t.prototype;return!(!cs(a)||!a.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function cs(s){return Object.prototype.toString.call(s)==="[object Object]"}function Nt(s){return new Promise(t=>{He.setTimeout(t,s)})}function wt(s,t,a){return typeof a.structuralSharing=="function"?a.structuralSharing(s,t):a.structuralSharing!==!1?Is(s,t):t}function _t(s,t,a=0){const r=[...s,t];return a&&r.length>a?r.slice(1):r}function St(s,t,a=0){const r=[t,...s];return a&&r.length>a?r.slice(0,-1):r}var ss=Symbol();function Ms(s,t){return!s.queryFn&&t?.initialPromise?()=>t.initialPromise:!s.queryFn||s.queryFn===ss?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn}function Ct(s,t,a){let r=!1,n;return Object.defineProperty(s,"signal",{enumerable:!0,get:()=>(n??=t(),r||(r=!0,n.aborted?a():n.addEventListener("abort",a,{once:!0})),n)}),s}var kt=class extends $e{#e;#s;#t;constructor(){super(),this.#t=s=>{if(!Ue&&window.addEventListener){const t=()=>s();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#s||this.setEventListener(this.#t)}onUnsubscribe(){this.hasListeners()||(this.#s?.(),this.#s=void 0)}setEventListener(s){this.#t=s,this.#s?.(),this.#s=s(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(s){this.#e!==s&&(this.#e=s,this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(t=>{t(s)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},zs=new kt;function Ft(){let s,t;const a=new Promise((n,i)=>{s=n,t=i});a.status="pending",a.catch(()=>{});function r(n){Object.assign(a,n),delete a.resolve,delete a.reject}return a.resolve=n=>{r({status:"fulfilled",value:n}),s(n)},a.reject=n=>{r({status:"rejected",reason:n}),t(n)},a}var Rt=ft;function Pt(){let s=[],t=0,a=c=>{c()},r=c=>{c()},n=Rt;const i=c=>{t?s.push(c):n(()=>{a(c)})},x=()=>{const c=s;s=[],c.length&&n(()=>{r(()=>{c.forEach(j=>{a(j)})})})};return{batch:c=>{let j;t++;try{j=c()}finally{t--,t||x()}return j},batchCalls:c=>(...j)=>{i(()=>{c(...j)})},schedule:i,setNotifyFunction:c=>{a=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{n=c}}}var J=Pt(),At=class extends $e{#e=!0;#s;#t;constructor(){super(),this.#t=s=>{if(!Ue&&window.addEventListener){const t=()=>s(!0),a=()=>s(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",a)}}}}onSubscribe(){this.#s||this.setEventListener(this.#t)}onUnsubscribe(){this.hasListeners()||(this.#s?.(),this.#s=void 0)}setEventListener(s){this.#t=s,this.#s?.(),this.#s=s(this.setOnline.bind(this))}setOnline(s){this.#e!==s&&(this.#e=s,this.listeners.forEach(a=>{a(s)}))}isOnline(){return this.#e}},Te=new At;function It(s){return Math.min(1e3*2**s,3e4)}function Ls(s){return(s??"online")==="online"?Te.isOnline():!0}var Xe=class extends Error{constructor(s){super("CancelledError"),this.revert=s?.revert,this.silent=s?.silent}};function Os(s){let t=!1,a=0,r;const n=Ft(),i=()=>n.status!=="pending",x=w=>{if(!i()){const l=new Xe(w);y(l),s.onCancel?.(l)}},c=()=>{t=!0},j=()=>{t=!1},o=()=>zs.isFocused()&&(s.networkMode==="always"||Te.isOnline())&&s.canRun(),u=()=>Ls(s.networkMode)&&s.canRun(),N=w=>{i()||(r?.(),n.resolve(w))},y=w=>{i()||(r?.(),n.reject(w))},g=()=>new Promise(w=>{r=l=>{(i()||o())&&w(l)},s.onPause?.()}).then(()=>{r=void 0,i()||s.onContinue?.()}),p=()=>{if(i())return;let w;const l=a===0?s.initialPromise:void 0;try{w=l??s.fn()}catch(h){w=Promise.reject(h)}Promise.resolve(w).then(N).catch(h=>{if(i())return;const f=s.retry??(Ue?0:3),R=s.retryDelay??It,_=typeof R=="function"?R(a,h):R,A=f===!0||typeof f=="number"&&a<f||typeof f=="function"&&f(a,h);if(t||!A){y(h);return}a++,s.onFail?.(a,h),Nt(_).then(()=>o()?void 0:g()).then(()=>{t?y(h):p()})})};return{promise:n,status:()=>n.status,cancel:x,continue:()=>(r?.(),n),cancelRetry:c,continueRetry:j,canStart:u,start:()=>(u()?p():g().then(p),n)}}var Ts=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),gt(this.gcTime)&&(this.#e=He.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s??(Ue?1/0:300*1e3))}clearGcTimeout(){this.#e&&(He.clearTimeout(this.#e),this.#e=void 0)}},Mt=class extends Ts{#e;#s;#t;#r;#a;#i;#l;constructor(s){super(),this.#l=!1,this.#i=s.defaultOptions,this.setOptions(s.options),this.observers=[],this.#r=s.client,this.#t=this.#r.getQueryCache(),this.queryKey=s.queryKey,this.queryHash=s.queryHash,this.#e=ds(this.options),this.state=s.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#a?.promise}setOptions(s){if(this.options={...this.#i,...s},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=ds(this.options);t.data!==void 0&&(this.setState(os(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#t.remove(this)}setData(s,t){const a=wt(this.state.data,s,this.options);return this.#n({data:a,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),a}setState(s,t){this.#n({type:"setState",state:s,setStateOptions:t})}cancel(s){const t=this.#a?.promise;return this.#a?.cancel(s),t?t.then(le).catch(le):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(s=>vt(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ss||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(s=>Ge(s.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(s=0){return this.state.data===void 0?!0:s==="static"?!1:this.state.isInvalidated?!0:!bt(this.state.dataUpdatedAt,s)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#a?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#a?.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(t=>t!==s),this.observers.length||(this.#a&&(this.#l?this.#a.cancel({revert:!0}):this.#a.cancelRetry()),this.scheduleGc()),this.#t.notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#n({type:"invalidate"})}async fetch(s,t){if(this.state.fetchStatus!=="idle"&&this.#a?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#a)return this.#a.continueRetry(),this.#a.promise}if(s&&this.setOptions(s),!this.options.queryFn){const c=this.observers.find(j=>j.options.queryFn);c&&this.setOptions(c.options)}const a=new AbortController,r=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#l=!0,a.signal)})},n=()=>{const c=Ms(this.options,t),o=(()=>{const u={client:this.#r,queryKey:this.queryKey,meta:this.meta};return r(u),u})();return this.#l=!1,this.options.persister?this.options.persister(c,o,this):c(o)},x=(()=>{const c={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:n};return r(c),c})();this.options.behavior?.onFetch(x,this),this.#s=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==x.fetchOptions?.meta)&&this.#n({type:"fetch",meta:x.fetchOptions?.meta}),this.#a=Os({initialPromise:t?.initialPromise,fn:x.fetchFn,onCancel:c=>{c instanceof Xe&&c.revert&&this.setState({...this.#s,fetchStatus:"idle"}),a.abort()},onFail:(c,j)=>{this.#n({type:"failed",failureCount:c,error:j})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:x.options.retry,retryDelay:x.options.retryDelay,networkMode:x.options.networkMode,canRun:()=>!0});try{const c=await this.#a.start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),this.#t.config.onSuccess?.(c,this),this.#t.config.onSettled?.(c,this.state.error,this),c}catch(c){if(c instanceof Xe){if(c.silent)return this.#a.promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw this.#n({type:"error",error:c}),this.#t.config.onError?.(c,this),this.#t.config.onSettled?.(this.state.data,c,this),c}finally{this.scheduleGc()}}#n(s){const t=a=>{switch(s.type){case"failed":return{...a,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...zt(a.data,this.options),fetchMeta:s.meta??null};case"success":const r={...a,...os(s.data,s.dataUpdatedAt),dataUpdateCount:a.dataUpdateCount+1,...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#s=s.manual?r:void 0,r;case"error":const n=s.error;return{...a,error:n,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...s.state}}};this.state=t(this.state),J.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),this.#t.notify({query:this,type:"updated",action:s})})}};function zt(s,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ls(t.networkMode)?"fetching":"paused",...s===void 0&&{error:null,status:"pending"}}}function os(s,t){return{data:s,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function ds(s){const t=typeof s.initialData=="function"?s.initialData():s.initialData,a=t!==void 0,r=a?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:a?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:a?"success":"pending",fetchStatus:"idle"}}function ms(s){return{onFetch:(t,a)=>{const r=t.options,n=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],x=t.state.data?.pageParams||[];let c={pages:[],pageParams:[]},j=0;const o=async()=>{let u=!1;const N=p=>{Ct(p,()=>t.signal,()=>u=!0)},y=Ms(t.options,t.fetchOptions),g=async(p,w,l)=>{if(u)return Promise.reject();if(w==null&&p.pages.length)return Promise.resolve(p);const f=(()=>{const P={client:t.client,queryKey:t.queryKey,pageParam:w,direction:l?"backward":"forward",meta:t.options.meta};return N(P),P})(),R=await y(f),{maxPages:_}=t.options,A=l?St:_t;return{pages:A(p.pages,R,_),pageParams:A(p.pageParams,w,_)}};if(n&&i.length){const p=n==="backward",w=p?Lt:xs,l={pages:i,pageParams:x},h=w(r,l);c=await g(l,h,p)}else{const p=s??i.length;do{const w=j===0?x[0]??r.initialPageParam:xs(r,c);if(j>0&&w==null)break;c=await g(c,w),j++}while(j<p)}return c};t.options.persister?t.fetchFn=()=>t.options.persister?.(o,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},a):t.fetchFn=o}}}function xs(s,{pages:t,pageParams:a}){const r=t.length-1;return t.length>0?s.getNextPageParam(t[r],t,a[r],a):void 0}function Lt(s,{pages:t,pageParams:a}){return t.length>0?s.getPreviousPageParam?.(t[0],t,a[0],a):void 0}var Ot=class extends Ts{#e;#s;#t;#r;constructor(s){super(),this.#e=s.client,this.mutationId=s.mutationId,this.#t=s.mutationCache,this.#s=[],this.state=s.state||Tt(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){this.#s.includes(s)||(this.#s.push(s),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){this.#s=this.#s.filter(t=>t!==s),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){this.#s.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(s){const t=()=>{this.#a({type:"continue"})},a={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=Os({fn:()=>this.options.mutationFn?this.options.mutationFn(s,a):Promise.reject(new Error("No mutationFn found")),onFail:(i,x)=>{this.#a({type:"failed",failureCount:i,error:x})},onPause:()=>{this.#a({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const r=this.state.status==="pending",n=!this.#r.canStart();try{if(r)t();else{this.#a({type:"pending",variables:s,isPaused:n}),await this.#t.config.onMutate?.(s,this,a);const x=await this.options.onMutate?.(s,a);x!==this.state.context&&this.#a({type:"pending",context:x,variables:s,isPaused:n})}const i=await this.#r.start();return await this.#t.config.onSuccess?.(i,s,this.state.context,this,a),await this.options.onSuccess?.(i,s,this.state.context,a),await this.#t.config.onSettled?.(i,null,this.state.variables,this.state.context,this,a),await this.options.onSettled?.(i,null,s,this.state.context,a),this.#a({type:"success",data:i}),i}catch(i){try{await this.#t.config.onError?.(i,s,this.state.context,this,a)}catch(x){Promise.reject(x)}try{await this.options.onError?.(i,s,this.state.context,a)}catch(x){Promise.reject(x)}try{await this.#t.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,a)}catch(x){Promise.reject(x)}try{await this.options.onSettled?.(void 0,i,s,this.state.context,a)}catch(x){Promise.reject(x)}throw this.#a({type:"error",error:i}),i}finally{this.#t.runNext(this)}}#a(s){const t=a=>{switch(s.type){case"failed":return{...a,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...a,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:s.error,failureCount:a.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=t(this.state),J.batch(()=>{this.#s.forEach(a=>{a.onMutationUpdate(s)}),this.#t.notify({mutation:this,type:"updated",action:s})})}};function Tt(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Dt=class extends $e{constructor(s={}){super(),this.config=s,this.#e=new Set,this.#s=new Map,this.#t=0}#e;#s;#t;build(s,t,a){const r=new Ot({client:s,mutationCache:this,mutationId:++this.#t,options:s.defaultMutationOptions(t),state:a});return this.add(r),r}add(s){this.#e.add(s);const t=Ae(s);if(typeof t=="string"){const a=this.#s.get(t);a?a.push(s):this.#s.set(t,[s])}this.notify({type:"added",mutation:s})}remove(s){if(this.#e.delete(s)){const t=Ae(s);if(typeof t=="string"){const a=this.#s.get(t);if(a)if(a.length>1){const r=a.indexOf(s);r!==-1&&a.splice(r,1)}else a[0]===s&&this.#s.delete(t)}}this.notify({type:"removed",mutation:s})}canRun(s){const t=Ae(s);if(typeof t=="string"){const r=this.#s.get(t)?.find(n=>n.state.status==="pending");return!r||r===s}else return!0}runNext(s){const t=Ae(s);return typeof t=="string"?this.#s.get(t)?.find(r=>r!==s&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){J.batch(()=>{this.#e.forEach(s=>{this.notify({type:"removed",mutation:s})}),this.#e.clear(),this.#s.clear()})}getAll(){return Array.from(this.#e)}find(s){const t={exact:!0,...s};return this.getAll().find(a=>is(t,a))}findAll(s={}){return this.getAll().filter(t=>is(s,t))}notify(s){J.batch(()=>{this.listeners.forEach(t=>{t(s)})})}resumePausedMutations(){const s=this.getAll().filter(t=>t.state.isPaused);return J.batch(()=>Promise.all(s.map(t=>t.continue().catch(le))))}};function Ae(s){return s.options.scope?.id}var Et=class extends $e{constructor(s={}){super(),this.config=s,this.#e=new Map}#e;build(s,t,a){const r=t.queryKey,n=t.queryHash??es(r,t);let i=this.get(n);return i||(i=new Mt({client:s,queryKey:r,queryHash:n,options:s.defaultQueryOptions(t),state:a,defaultOptions:s.getQueryDefaults(r)}),this.add(i)),i}add(s){this.#e.has(s.queryHash)||(this.#e.set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const t=this.#e.get(s.queryHash);t&&(s.destroy(),t===s&&this.#e.delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){J.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return this.#e.get(s)}getAll(){return[...this.#e.values()]}find(s){const t={exact:!0,...s};return this.getAll().find(a=>ns(t,a))}findAll(s={}){const t=this.getAll();return Object.keys(s).length>0?t.filter(a=>ns(s,a)):t}notify(s){J.batch(()=>{this.listeners.forEach(t=>{t(s)})})}onFocus(){J.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){J.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},qt=class{#e;#s;#t;#r;#a;#i;#l;#n;constructor(s={}){this.#e=s.queryCache||new Et,this.#s=s.mutationCache||new Dt,this.#t=s.defaultOptions||{},this.#r=new Map,this.#a=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#l=zs.subscribe(async s=>{s&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#n=Te.subscribe(async s=>{s&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#l?.(),this.#l=void 0,this.#n?.(),this.#n=void 0)}isFetching(s){return this.#e.findAll({...s,fetchStatus:"fetching"}).length}isMutating(s){return this.#s.findAll({...s,status:"pending"}).length}getQueryData(s){const t=this.defaultQueryOptions({queryKey:s});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(s){const t=this.defaultQueryOptions(s),a=this.#e.build(this,t),r=a.state.data;return r===void 0?this.fetchQuery(s):(s.revalidateIfStale&&a.isStaleByTime(Ge(t.staleTime,a))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(s){return this.#e.findAll(s).map(({queryKey:t,state:a})=>{const r=a.data;return[t,r]})}setQueryData(s,t,a){const r=this.defaultQueryOptions({queryKey:s}),i=this.#e.get(r.queryHash)?.state.data,x=jt(t,i);if(x!==void 0)return this.#e.build(this,r).setData(x,{...a,manual:!0})}setQueriesData(s,t,a){return J.batch(()=>this.#e.findAll(s).map(({queryKey:r})=>[r,this.setQueryData(r,t,a)]))}getQueryState(s){const t=this.defaultQueryOptions({queryKey:s});return this.#e.get(t.queryHash)?.state}removeQueries(s){const t=this.#e;J.batch(()=>{t.findAll(s).forEach(a=>{t.remove(a)})})}resetQueries(s,t){const a=this.#e;return J.batch(()=>(a.findAll(s).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...s},t)))}cancelQueries(s,t={}){const a={revert:!0,...t},r=J.batch(()=>this.#e.findAll(s).map(n=>n.cancel(a)));return Promise.all(r).then(le).catch(le)}invalidateQueries(s,t={}){return J.batch(()=>(this.#e.findAll(s).forEach(a=>{a.invalidate()}),s?.refetchType==="none"?Promise.resolve():this.refetchQueries({...s,type:s?.refetchType??s?.type??"active"},t)))}refetchQueries(s,t={}){const a={...t,cancelRefetch:t.cancelRefetch??!0},r=J.batch(()=>this.#e.findAll(s).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,a);return a.throwOnError||(i=i.catch(le)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(le)}fetchQuery(s){const t=this.defaultQueryOptions(s);t.retry===void 0&&(t.retry=!1);const a=this.#e.build(this,t);return a.isStaleByTime(Ge(t.staleTime,a))?a.fetch(t):Promise.resolve(a.state.data)}prefetchQuery(s){return this.fetchQuery(s).then(le).catch(le)}fetchInfiniteQuery(s){return s.behavior=ms(s.pages),this.fetchQuery(s)}prefetchInfiniteQuery(s){return this.fetchInfiniteQuery(s).then(le).catch(le)}ensureInfiniteQueryData(s){return s.behavior=ms(s.pages),this.ensureQueryData(s)}resumePausedMutations(){return Te.isOnline()?this.#s.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#s}getDefaultOptions(){return this.#t}setDefaultOptions(s){this.#t=s}setQueryDefaults(s,t){this.#r.set(Se(s),{queryKey:s,defaultOptions:t})}getQueryDefaults(s){const t=[...this.#r.values()],a={};return t.forEach(r=>{Ce(s,r.queryKey)&&Object.assign(a,r.defaultOptions)}),a}setMutationDefaults(s,t){this.#a.set(Se(s),{mutationKey:s,defaultOptions:t})}getMutationDefaults(s){const t=[...this.#a.values()],a={};return t.forEach(r=>{Ce(s,r.mutationKey)&&Object.assign(a,r.defaultOptions)}),a}defaultQueryOptions(s){if(s._defaulted)return s;const t={...this.#t.queries,...this.getQueryDefaults(s.queryKey),...s,_defaulted:!0};return t.queryHash||(t.queryHash=es(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===ss&&(t.enabled=!1),t}defaultMutationOptions(s){return s?._defaulted?s:{...this.#t.mutations,...s?.mutationKey&&this.getMutationDefaults(s.mutationKey),...s,_defaulted:!0}}clear(){this.#e.clear(),this.#s.clear()}},$t=m.createContext(void 0),Ut=({client:s,children:t})=>(m.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]),e.jsx($t.Provider,{value:s,children:t}));const hs=s=>{let t;const a=new Set,r=(o,u)=>{const N=typeof o=="function"?o(t):o;if(!Object.is(N,t)){const y=t;t=u??(typeof N!="object"||N===null)?N:Object.assign({},t,N),a.forEach(g=>g(t,y))}},n=()=>t,c={setState:r,getState:n,getInitialState:()=>j,subscribe:o=>(a.add(o),()=>a.delete(o))},j=t=s(r,n,c);return c},Bt=(s=>s?hs(s):hs),Wt=s=>s;function Qt(s,t=Wt){const a=we.useSyncExternalStore(s.subscribe,we.useCallback(()=>t(s.getState()),[s,t]),we.useCallback(()=>t(s.getInitialState()),[s,t]));return we.useDebugValue(a),a}const Vt=s=>{const t=Bt(s),a=r=>Qt(t,r);return Object.assign(a,t),a},Ht=(s=>Vt);function Gt(s,t){let a;try{a=s()}catch{return}return{getItem:n=>{var i;const x=j=>j===null?null:JSON.parse(j,void 0),c=(i=a.getItem(n))!=null?i:null;return c instanceof Promise?c.then(x):x(c)},setItem:(n,i)=>a.setItem(n,JSON.stringify(i,void 0)),removeItem:n=>a.removeItem(n)}}const Ze=s=>t=>{try{const a=s(t);return a instanceof Promise?a:{then(r){return Ze(r)(a)},catch(r){return this}}}catch(a){return{then(r){return this},catch(r){return Ze(r)(a)}}}},Kt=(s,t)=>(a,r,n)=>{let i={storage:Gt(()=>localStorage),partialize:l=>l,version:0,merge:(l,h)=>({...h,...l}),...t},x=!1,c=0;const j=new Set,o=new Set;let u=i.storage;if(!u)return s((...l)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),a(...l)},r,n);const N=()=>{const l=i.partialize({...r()});return u.setItem(i.name,{state:l,version:i.version})},y=n.setState;n.setState=(l,h)=>(y(l,h),N());const g=s((...l)=>(a(...l),N()),r,n);n.getInitialState=()=>g;let p;const w=()=>{var l,h;if(!u)return;const f=++c;x=!1,j.forEach(_=>{var A;return _((A=r())!=null?A:g)});const R=((h=i.onRehydrateStorage)==null?void 0:h.call(i,(l=r())!=null?l:g))||void 0;return Ze(u.getItem.bind(u))(i.name).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==i.version){if(i.migrate){const A=i.migrate(_.state,_.version);return A instanceof Promise?A.then(P=>[!0,P]):[!0,A]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,_.state];return[!1,void 0]}).then(_=>{var A;if(f!==c)return;const[P,q]=_;if(p=i.merge(q,(A=r())!=null?A:g),a(p,!0),P)return N()}).then(()=>{f===c&&(R?.(p,void 0),p=r(),x=!0,o.forEach(_=>_(p)))}).catch(_=>{f===c&&R?.(void 0,_)})};return n.persist={setOptions:l=>{i={...i,...l},l.storage&&(u=l.storage)},clearStorage:()=>{u?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>w(),hasHydrated:()=>x,onHydrate:l=>(j.add(l),()=>{j.delete(l)}),onFinishHydration:l=>(o.add(l),()=>{o.delete(l)})},i.skipHydration||w(),p||g},Xt=Kt,F=ct.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},withCredentials:!0});F.interceptors.request.use(s=>{const t=localStorage.getItem("token");return t&&(s.headers.Authorization=`Bearer ${t}`),s});F.interceptors.response.use(s=>s,s=>(s.response?.status===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(s)));const Zt=async s=>(await F.post("/auth/login",s)).data,Jt=async s=>(await F.post("/auth/register",s)).data,Yt=async()=>(await F.post("/auth/logout")).data,us=async()=>(await F.get("/auth/user")).data,ps=async s=>(await F.get(`/invitation/${s}`)).data,ne=Ht()(Xt((s,t)=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,isInitialized:!1,unreadNotifications:0,login:async(a,r)=>{s({isLoading:!0});try{const n=await Zt({login:a,password:r}),{user:i,token:x}=n.data;localStorage.setItem("token",x),s({user:i,token:x,isAuthenticated:!0,isLoading:!1})}catch(n){throw s({isLoading:!1}),n}},register:async a=>{s({isLoading:!0});try{const r=await Jt(a),{user:n,token:i}=r.data;localStorage.setItem("token",i),s({user:n,token:i,isAuthenticated:!0,isLoading:!1})}catch(r){throw s({isLoading:!1}),r}},logout:async()=>{try{await Yt()}finally{localStorage.removeItem("token"),s({user:null,token:null,isAuthenticated:!1,unreadNotifications:0})}},refreshUser:async()=>{if(t().token){s({isLoading:!0});try{const r=await us();s({user:r.data.user,unreadNotifications:r.data.unread_notifications,isAuthenticated:!0,isLoading:!1})}catch{localStorage.removeItem("token"),s({user:null,token:null,isAuthenticated:!1,isLoading:!1})}}},initialize:async()=>{const a=t().token||localStorage.getItem("token");if(!a){s({isInitialized:!0});return}s({isLoading:!0,token:a});try{const r=await us();s({user:r.data.user,unreadNotifications:r.data.unread_notifications,isAuthenticated:!0,isLoading:!1,isInitialized:!0})}catch{localStorage.removeItem("token"),s({user:null,token:null,isAuthenticated:!1,isLoading:!1,isInitialized:!0})}},setUnreadNotifications:a=>{s({unreadNotifications:a})}}),{name:"auth-storage",partialize:s=>({token:s.token})})),W=({size:s="md",className:t})=>{const a={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return e.jsxs("svg",{className:he("animate-spin text-[#f0b90b]",a[s],t),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},ea=({children:s})=>{const{isAuthenticated:t,isLoading:a}=ne(),r=ot();return a?e.jsx("div",{className:"min-h-screen bg-[#0a0a0f] flex items-center justify-center",children:e.jsx(W,{size:"lg"})}):t?e.jsx(e.Fragment,{children:s}):e.jsx(be,{to:"/login",state:{from:r},replace:!0})},sa=({children:s})=>{const{user:t,isAuthenticated:a,isLoading:r}=ne();return r?e.jsx("div",{className:"min-h-screen bg-[#0a0a0f] flex items-center justify-center",children:e.jsx(W,{size:"lg"})}):a?t?.role!=="admin"?e.jsx(be,{to:"/member/dashboard",replace:!0}):e.jsx(e.Fragment,{children:s}):e.jsx(be,{to:"/login",replace:!0})},Ve=({children:s})=>{const{user:t,isAuthenticated:a,isLoading:r}=ne();if(r)return e.jsx("div",{className:"min-h-screen bg-[#0a0a0f] flex items-center justify-center",children:e.jsx(W,{size:"lg"})});if(a&&t){const n=t.role==="admin"?"/admin/dashboard":"/member/dashboard";return e.jsx(be,{to:n,replace:!0})}return e.jsx(e.Fragment,{children:s})},ta=[{name:"Dashboard",href:"/admin/dashboard",icon:js},{name:"Members",href:"/admin/members",icon:ze},{name:"Top-Up Requests",href:"/admin/topup-requests",icon:gs},{name:"Withdrawals",href:"/admin/withdrawal-requests",icon:Je},{name:"Invitation Links",href:"/admin/invitation-links",icon:Me},{name:"User Management",href:"/admin/users",icon:ze},{name:"Audit Logs",href:"/admin/audit-logs",icon:Ws},{name:"Notifications",href:"/admin/notifications",icon:Re},{name:"Profile",href:"/admin/profile",icon:Pe},{name:"Settings",href:"/admin/settings",icon:bs}],aa=[{name:"Dashboard",href:"/member/dashboard",icon:js},{name:"Investments",href:"/member/investments",icon:ee},{name:"Top-Up",href:"/member/topup",icon:gs},{name:"Withdraw",href:"/member/withdraw",icon:Je},{name:"Notifications",href:"/member/notifications",icon:Re},{name:"Profile",href:"/member/profile",icon:Pe}],Ds=({isOpen:s,onClose:t})=>{const{user:a}=ne(),r=a?.role==="admin"?ta:aa;return e.jsxs(e.Fragment,{children:[s&&e.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:t}),e.jsx("aside",{className:he("fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-[#eaecef] transform transition-transform duration-300 ease-in-out","lg:translate-x-0",s?"translate-x-0":"-translate-x-full"),children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-6 border-b border-[#eaecef]",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-[#f0b90b] rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-[#1e2329] font-bold text-sm",children:"ZX"})}),e.jsx("span",{className:"text-xl font-bold text-[#1e2329]",children:"ZenithX"})]}),e.jsx("button",{onClick:t,className:"p-2 text-[#707a8a] hover:text-[#1e2329] lg:hidden",children:e.jsx(Fe,{className:"w-6 h-6"})})]}),e.jsx("nav",{className:"flex-1 px-4 py-6 space-y-1 overflow-y-auto",children:r.map(n=>e.jsxs(dt,{to:n.href,onClick:t,className:({isActive:i})=>he("flex items-center px-4 py-2.5 text-sm font-medium rounded-lg transition-colors",i?"bg-[#fef6d8] text-[#1e2329] border border-[#f0b90b]/30":"text-[#707a8a] hover:text-[#1e2329] hover:bg-[#f5f5f5]"),children:[e.jsx(n.icon,{className:"w-5 h-5 mr-3 flex-shrink-0"}),n.name]},n.name))}),e.jsx("div",{className:"p-4 border-t border-[#eaecef]",children:e.jsxs("div",{className:"flex items-center px-4 py-3 bg-[#f5f5f5] rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-[#f0b90b] rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-[#1e2329] font-medium text-sm",children:a?.name?.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"ml-3 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-[#1e2329] truncate",children:a?.name}),e.jsx("p",{className:"text-xs text-[#707a8a] capitalize",children:a?.role})]})]})})]})})]})},Es=({onMenuClick:s})=>{const t=de(),{user:a,logout:r,unreadNotifications:n}=ne(),i=async()=>{await r(),t("/login")};return e.jsxs("header",{className:"h-16 bg-white border-b border-[#eaecef] flex items-center justify-between px-4 sm:px-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:s,className:"p-2 text-[#707a8a] hover:text-[#1e2329] lg:hidden",children:e.jsx(Qs,{className:"w-6 h-6"})}),e.jsx("h1",{className:"text-base sm:text-lg font-semibold text-[#1e2329]",children:a?.role==="admin"?"Admin Panel":"Member Dashboard"})]}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[e.jsxs("button",{onClick:()=>t(a?.role==="admin"?"/admin/notifications":"/member/notifications"),className:"relative p-2 text-[#707a8a] hover:text-[#1e2329] transition-colors",children:[e.jsx(Re,{className:"w-5 h-5 sm:w-6 sm:h-6"}),n>0&&e.jsx("span",{className:"absolute top-0 right-0 w-4 h-4 sm:w-5 sm:h-5 bg-[#cf304a] rounded-full text-[10px] sm:text-xs text-white flex items-center justify-center",children:n>9?"9+":n})]}),e.jsxs(Ne,{as:"div",className:"relative",children:[e.jsxs(Ne.Button,{className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-[#f5f5f5] transition-colors",children:[e.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 bg-[#f0b90b] rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-[#1e2329] font-medium text-xs sm:text-sm",children:a?.name?.charAt(0).toUpperCase()})}),e.jsx("span",{className:"text-[#474d57] text-sm hidden sm:block",children:a?.name})]}),e.jsxs(Ne.Items,{className:"absolute right-0 mt-2 w-48 bg-white border border-[#eaecef] rounded-lg shadow-lg py-1 z-50",children:[e.jsx(Ne.Item,{children:({active:x})=>e.jsxs("button",{onClick:()=>t(a?.role==="admin"?"/admin/profile":"/member/profile"),className:`${x?"bg-[#f5f5f5]":""} flex items-center w-full px-4 py-2 text-sm text-[#474d57]`,children:[e.jsx(Pe,{className:"w-5 h-5 mr-2"}),"Profile"]})}),e.jsx(Ne.Item,{children:({active:x})=>e.jsxs("button",{onClick:i,className:`${x?"bg-[#f5f5f5]":""} flex items-center w-full px-4 py-2 text-sm text-[#cf304a]`,children:[e.jsx(vs,{className:"w-5 h-5 mr-2"}),"Logout"]})})]})]})]})]})},ra=()=>{const[s,t]=m.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-[#fafafa]",children:[e.jsx(Ds,{isOpen:s,onClose:()=>t(!1)}),e.jsxs("div",{className:"lg:ml-64",children:[e.jsx(Es,{onMenuClick:()=>t(!0)}),e.jsx("main",{className:"p-4 sm:p-6",children:e.jsx(Rs,{})})]})]})},na=()=>{const[s,t]=m.useState(!1);return m.useEffect(()=>{window.Tawk_API=window.Tawk_API||{},window.Tawk_LoadStart=new Date;const a=document.createElement("script");return a.async=!0,a.src="https://embed.tawk.to/6976c29fba77e8198a86620c/1jfrugghi",a.charset="UTF-8",a.setAttribute("crossorigin","*"),document.head.appendChild(a),()=>{a.parentNode&&a.parentNode.removeChild(a),window.Tawk_API?.hideWidget&&window.Tawk_API.hideWidget()}},[]),e.jsxs("div",{className:"min-h-screen bg-[#fafafa]",children:[e.jsx(Ds,{isOpen:s,onClose:()=>t(!1)}),e.jsxs("div",{className:"lg:ml-64",children:[e.jsx(Es,{onMenuClick:()=>t(!0)}),e.jsx("main",{className:"p-4 sm:p-6",children:e.jsx(Rs,{})})]})]})},d=m.forwardRef(({className:s,variant:t="primary",size:a="md",isLoading:r,disabled:n,children:i,...x},c)=>{const j="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white disabled:opacity-50 disabled:cursor-not-allowed",o={primary:"bg-[#f0b90b] text-[#1e2329] hover:bg-[#d9a60a] focus:ring-[#f0b90b]",secondary:"bg-[#f5f5f5] text-[#1e2329] hover:bg-[#eaecef] border border-[#eaecef] focus:ring-[#707a8a]",success:"bg-[#03a66d] text-white hover:bg-[#029a64] focus:ring-[#03a66d]",danger:"bg-[#cf304a] text-white hover:bg-[#b82a42] focus:ring-[#cf304a]",ghost:"text-[#707a8a] hover:text-[#1e2329] hover:bg-[#f5f5f5] focus:ring-[#707a8a]"},u={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return e.jsxs("button",{ref:c,className:he(j,o[t],u[a],s),disabled:n||r,...x,children:[r&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i]})});d.displayName="Button";const S=m.forwardRef(({className:s,padding:t="md",children:a,...r},n)=>{const i={none:"",sm:"p-3 sm:p-4",md:"p-4 sm:p-6",lg:"p-5 sm:p-8"};return e.jsx("div",{ref:n,className:he("bg-white border border-[#eaecef] rounded-xl shadow-sm",i[t],s),...r,children:a})});S.displayName="Card";const K=m.forwardRef(({className:s,children:t,...a},r)=>e.jsx("div",{ref:r,className:he("flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4 mb-4",s),...a,children:t}));K.displayName="CardHeader";const X=m.forwardRef(({className:s,children:t,...a},r)=>e.jsx("h3",{ref:r,className:he("text-base sm:text-lg font-semibold text-[#1e2329]",s),...a,children:t}));X.displayName="CardTitle";const ia=()=>{m.useEffect(()=>{const a=document.createElement("script");return a.src="https://s3.tradingview.com/tv.js",a.async=!0,a.onload=()=>{window.TradingView&&new window.TradingView.widget({autosize:!0,symbol:"USDT-TRON",interval:"D",timezone:"Asia/Manila",theme:"light",style:"1",locale:"en",toolbar_bg:"#f0b90b",enable_publishing:!1,hide_top_toolbar:!1,hide_legend:!1,save_image:!1,container_id:"tradingview_widget",backgroundColor:"#ffffff",gridColor:"#eaecef"})},document.body.appendChild(a),()=>{document.body.removeChild(a)}},[]),m.useEffect(()=>{window.Tawk_API=window.Tawk_API||{},window.Tawk_LoadStart=new Date;const a=document.createElement("script");return a.async=!0,a.src="https://embed.tawk.to/6976c29fba77e8198a86620c/1jfrugghi",a.setAttribute("crossorigin","*"),document.head.appendChild(a),()=>{a.parentNode&&a.parentNode.removeChild(a),window.Tawk_API?.hideWidget&&window.Tawk_API.hideWidget()}},[]);const s=[{icon:ee,title:"High Returns",description:"Competitive interest rates on your crypto investments with monthly payouts."},{icon:Ye,title:"Secure Platform",description:"Bank-level security with multi-layer encryption to protect your assets."},{icon:ve,title:"Real-Time Trading",description:"Access live market data and execute trades instantly 24/7."},{icon:Vs,title:"Fast Withdrawals",description:"Quick and seamless withdrawal process to Crypto TRC 20 or bank account."},{icon:ys,title:"Expert Support",description:"Dedicated customer support team available to assist you anytime."},{icon:Ns,title:"Advanced Analytics",description:"Comprehensive charts and tools to track your investment performance."}],t=[{label:"Total Trading Volume",value:"$2.5B+"},{label:"Active Users",value:"50,000+"},{label:"Average Returns",value:"12% APY"},{label:"Countries Supported",value:"15+"}];return e.jsxs("div",{className:"min-h-screen bg-[#fafafa]",children:[e.jsx("nav",{className:"bg-white border-b border-[#eaecef] sticky top-0 z-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-[#f0b90b] rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-[#1e2329] font-bold text-sm sm:text-base",children:"ZX"})}),e.jsx("span",{className:"text-lg sm:text-xl font-bold text-[#1e2329]",children:"ZenithX"})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(me,{to:"/register",children:e.jsx(d,{variant:"secondary",className:"text-sm sm:text-base",children:"Register"})}),e.jsx(me,{to:"/login",children:e.jsx(d,{variant:"primary",className:"text-sm sm:text-base",children:"Login"})})]})]})})}),e.jsx("section",{className:"relative overflow-hidden",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-20 lg:py-24",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-[#1e2329] mb-4 sm:mb-6",children:["Your Gateway to"," ",e.jsx("span",{className:"text-[#f0b90b]",children:"Crypto Wealth"})]}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-[#707a8a] max-w-3xl mx-auto mb-6 sm:mb-8 px-4",children:"Join thousands of investors earning passive income through our secure crypto trading platform. Start building your financial future today."}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsx(me,{to:"/register",children:e.jsx(d,{size:"lg",className:"w-full sm:w-auto",children:"Get Started"})}),e.jsx("a",{href:"#features",children:e.jsx(d,{variant:"secondary",size:"lg",className:"w-full sm:w-auto",children:"Learn More"})})]})]})})}),e.jsx("section",{className:"bg-white border-y border-[#eaecef] py-8 sm:py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-8",children:t.map((a,r)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-[#1e2329] mb-1 sm:mb-2",children:a.value}),e.jsx("div",{className:"text-xs sm:text-sm text-[#707a8a]",children:a.label})]},r))})})}),e.jsx("section",{className:"py-12 sm:py-16 lg:py-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-[#1e2329] mb-3 sm:mb-4",children:"Live Market Data"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg text-[#707a8a] max-w-2xl mx-auto",children:"Track real-time cryptocurrency prices and market trends with advanced charting tools."})]}),e.jsx(S,{padding:"none",className:"overflow-hidden",children:e.jsx("div",{id:"tradingview_widget",className:"h-[400px] sm:h-[500px] lg:h-[600px]"})})]})}),e.jsx("section",{id:"features",className:"bg-white py-12 sm:py-16 lg:py-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-[#1e2329] mb-3 sm:mb-4",children:"Why Choose ZenithX?"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg text-[#707a8a] max-w-2xl mx-auto",children:"Experience the best crypto investment platform with industry-leading features and support."})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8",children:s.map((a,r)=>e.jsx(S,{className:"hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-[#fef6d8] rounded-xl flex items-center justify-center mb-3 sm:mb-4",children:e.jsx(a.icon,{className:"w-6 h-6 sm:w-7 sm:h-7 text-[#f0b90b]"})}),e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-[#1e2329] mb-2",children:a.title}),e.jsx("p",{className:"text-xs sm:text-sm text-[#707a8a]",children:a.description})]})},r))})]})}),e.jsx("section",{className:"py-12 sm:py-16 lg:py-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-[#1e2329] mb-3 sm:mb-4",children:"How It Works"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg text-[#707a8a] max-w-2xl mx-auto",children:"Start your investment journey in three simple steps."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8",children:[{step:"01",title:"Get Invited",description:"Receive an exclusive invitation code from an existing member to join our platform."},{step:"02",title:"Make a Deposit",description:"Fund your account through crypto or bank transfer with flexible deposit options."},{step:"03",title:"Earn Returns",description:"Watch your investment grow with monthly interest payments directly to your account."}].map((a,r)=>e.jsxs("div",{className:"relative",children:[e.jsxs(S,{className:"h-full",children:[e.jsx("div",{className:"text-5xl sm:text-6xl font-bold text-[#f0b90b] opacity-20 mb-3 sm:mb-4",children:a.step}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-[#1e2329] mb-2 sm:mb-3",children:a.title}),e.jsx("p",{className:"text-sm sm:text-base text-[#707a8a]",children:a.description})]}),r<2&&e.jsx("div",{className:"hidden md:block absolute top-1/2 -right-4 transform -translate-y-1/2",children:e.jsx("div",{className:"w-8 h-0.5 bg-[#eaecef]"})})]},r))})]})}),e.jsx("section",{className:"bg-gradient-to-r from-[#f0b90b] to-[#d9a60a] py-12 sm:py-16 lg:py-20",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-[#1e2329] mb-3 sm:mb-4",children:"Ready to Start Investing?"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg text-[#474d57] mb-6 sm:mb-8",children:"Join our community of successful investors and start earning passive income today."}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsx(me,{to:"/register",children:e.jsx(d,{variant:"secondary",size:"lg",className:"bg-white text-[#1e2329] hover:bg-[#f5f5f5] shadow-lg w-full sm:w-auto",children:"Create Account"})}),e.jsx(me,{to:"/login",children:e.jsx(d,{variant:"secondary",size:"lg",className:"bg-[#1e2329] hover:bg-[#2b3139] shadow-lg w-full sm:w-auto",children:"Login"})})]})]})}),e.jsx("footer",{className:"bg-white border-t border-[#eaecef] py-8 sm:py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-[#f0b90b] rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-[#1e2329] font-bold text-sm",children:"ZX"})}),e.jsx("span",{className:"text-lg font-bold text-[#1e2329]",children:"ZenithX"})]}),e.jsx("p",{className:"text-xs sm:text-sm text-[#707a8a] text-center md:text-left",children:"Â© 2026 ZenithX. All rights reserved. Crypto Investment Platform."})]})})})]})},O=m.forwardRef(({className:s,label:t,error:a,id:r,...n},i)=>e.jsxs("div",{className:"w-full",children:[t&&e.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-[#474d57] mb-1",children:t}),e.jsx("input",{ref:i,id:r,className:he("w-full px-4 py-2 bg-white border rounded-lg text-[#1e2329] placeholder-[#b7b9bc]","focus:outline-none focus:ring-2 focus:ring-[#f0b90b] focus:border-transparent","transition-colors",a?"border-[#cf304a]":"border-[#eaecef]",s),...n}),a&&e.jsx("p",{className:"mt-1 text-sm text-[#cf304a]",children:a})]}));O.displayName="Input";const la=ae({login:E().min(1,"Username or email is required"),password:E().min(1,"Password is required")}),ca=()=>{const s=de(),{login:t}=ne(),[a,r]=m.useState(!1),{register:n,handleSubmit:i,formState:{errors:x}}=Y({resolver:te(la)}),c=async j=>{r(!0);try{await t(j.login,j.password);const u=ne.getState().user?.role==="admin"?"/admin/dashboard":"/member/dashboard";s(u),v.success("Login successful!")}catch(o){const N=o.response?.data?.message||"Login failed. Please try again.";v.error(N)}finally{r(!1)}};return e.jsx("div",{className:"min-h-screen bg-[#fafafa] flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex items-center justify-center space-x-2 mb-4",children:e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-[#f0b90b] rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-[#1e2329] font-bold text-lg sm:text-xl",children:"ZX"})})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-[#1e2329]",children:"Welcome to ZenithX"}),e.jsx("p",{className:"text-[#707a8a] mt-2",children:"Sign in to your account"})]}),e.jsx(S,{children:e.jsxs("form",{onSubmit:i(c),className:"space-y-6",children:[e.jsx(O,{label:"Username or Email",type:"text",placeholder:"Enter your username or email",error:x.login?.message,...n("login")}),e.jsx(O,{label:"Password",type:"password",placeholder:"Enter your password",error:x.password?.message,...n("password")}),e.jsx(d,{type:"submit",className:"w-full",size:"lg",isLoading:a,children:"Sign In"})]})}),e.jsxs("p",{className:"text-center text-[#707a8a] mt-6",children:["Don't have an account?"," ",e.jsx(me,{to:"/register",className:"text-[#f0b90b] hover:text-[#d9a60a]",children:"Register"})]})]})})},oa=ae({username:E().min(3,"Username must be at least 3 characters").max(50,"Username must be at most 50 characters").regex(/^[a-zA-Z0-9_]+$/,"Username can only contain letters, numbers, and underscores"),name:E().min(1,"Name is required"),email:E().email("Invalid email address"),phone:E().optional(),password:E().min(8,"Password must be at least 8 characters").regex(/[a-z]/,"Password must contain a lowercase letter").regex(/[A-Z]/,"Password must contain an uppercase letter").regex(/[0-9]/,"Password must contain a number"),password_confirmation:E()}).refine(s=>s.password===s.password_confirmation,{message:"Passwords do not match",path:["password_confirmation"]}),fs=()=>{const s=de(),{code:t}=Ps(),{register:a}=ne(),[r,n]=m.useState(!1),[i,x]=m.useState(!!t),[c,j]=m.useState(null),[o,u]=m.useState(null),[N,y]=m.useState(t||""),[g,p]=m.useState(!1),[w,l]=m.useState(null),{register:h,handleSubmit:f,formState:{errors:R}}=Y({resolver:te(oa)});m.useEffect(()=>{(async()=>{if(!t){x(!1);return}try{const q=await ps(t);j(q.data),y(t)}catch(q){u(q.response?.data?.message||"Invalid invitation code.")}finally{x(!1)}})()},[t]);const _=async P=>{if(P.preventDefault(),!N.trim()){l("Please enter an invitation code.");return}p(!0),l(null);try{const q=await ps(N.trim().toUpperCase());j(q.data),u(null)}catch(q){l(q.response?.data?.message||"Invalid invitation code.")}finally{p(!1)}},A=async P=>{if(N){n(!0);try{await a({invitation_code:N.trim().toUpperCase(),...P});const L=ne.getState().user?.role==="admin"?"/admin/dashboard":"/member/dashboard";s(L),v.success("Registration successful!")}catch(q){const $=q.response?.data?.message||"Registration failed. Please try again.";v.error($)}finally{n(!1)}}};return i?e.jsx("div",{className:"min-h-screen bg-[#fafafa] flex items-center justify-center",children:e.jsx(W,{size:"lg"})}):o&&t?e.jsx("div",{className:"min-h-screen bg-[#fafafa] flex items-center justify-center p-4",children:e.jsxs(S,{className:"max-w-md w-full text-center",children:[e.jsx("div",{className:"text-[#cf304a] mb-4",children:e.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h2",{className:"text-xl font-bold text-[#1e2329] mb-2",children:"Invalid Invitation"}),e.jsx("p",{className:"text-[#707a8a] mb-6",children:o}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(me,{to:"/register",children:e.jsx(d,{variant:"primary",className:"w-full",children:"Try Another Code"})}),e.jsx(me,{to:"/login",children:e.jsx(d,{variant:"secondary",className:"w-full",children:"Back to Login"})})]})]})}):c?e.jsx("div",{className:"min-h-screen bg-[#fafafa] flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex items-center justify-center space-x-2 mb-4",children:e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-[#f0b90b] rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-[#1e2329] font-bold text-lg sm:text-xl",children:"ZX"})})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-[#1e2329]",children:"Create Account"}),e.jsxs("p",{className:"text-[#707a8a] mt-2",children:["Interest Rate: ",e.jsxs("span",{className:"text-[#03a66d] font-semibold",children:[c?.interest_rate,"%"]})]})]}),e.jsxs(S,{children:[e.jsx("div",{className:"mb-4 p-3 bg-[#e6f7f0] rounded-lg border border-[#03a66d]/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-[#707a8a]",children:"Invitation Code"}),e.jsx("p",{className:"font-mono font-semibold text-[#1e2329]",children:N})]}),e.jsxs("div",{className:"flex items-center text-[#03a66d]",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{className:"text-sm ml-1",children:"Valid"})]})]})}),e.jsxs("form",{onSubmit:f(A),className:"space-y-4",children:[e.jsx(O,{label:"Username",type:"text",placeholder:"Choose a username",error:R.username?.message,...h("username")}),e.jsx(O,{label:"Full Name",type:"text",placeholder:"Enter your full name",error:R.name?.message,...h("name")}),e.jsx(O,{label:"Email",type:"email",placeholder:"Enter your email",error:R.email?.message,...h("email")}),e.jsx(O,{label:"Phone (Optional)",type:"tel",placeholder:"Enter your phone number",error:R.phone?.message,...h("phone")}),e.jsx(O,{label:"Password",type:"password",placeholder:"Create a password",error:R.password?.message,...h("password")}),e.jsx(O,{label:"Confirm Password",type:"password",placeholder:"Confirm your password",error:R.password_confirmation?.message,...h("password_confirmation")}),e.jsx(d,{type:"submit",className:"w-full",size:"lg",isLoading:r,children:"Create Account"})]}),!t&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{type:"button",onClick:()=>{j(null),y(""),l(null)},className:"text-sm text-[#707a8a] hover:text-[#1e2329]",children:"Use a different invitation code"})})]}),e.jsxs("p",{className:"text-center text-[#707a8a] mt-6",children:["Already have an account?"," ",e.jsx(me,{to:"/login",className:"text-[#f0b90b] hover:text-[#d9a60a]",children:"Sign in"})]})]})}):e.jsx("div",{className:"min-h-screen bg-[#fafafa] flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex items-center justify-center space-x-2 mb-4",children:e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-[#f0b90b] rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-[#1e2329] font-bold text-lg sm:text-xl",children:"ZX"})})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-[#1e2329]",children:"Join ZenithX"}),e.jsx("p",{className:"text-[#707a8a] mt-2",children:"Enter your invitation code to get started"})]}),e.jsx(S,{children:e.jsxs("form",{onSubmit:_,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(O,{label:"Invitation Code",type:"text",placeholder:"Enter your invitation code",value:N,onChange:P=>{y(P.target.value.toUpperCase()),l(null)},error:w||void 0,className:"uppercase"}),e.jsx("p",{className:"text-xs text-[#707a8a] mt-1",children:"Contact an existing member to get an invitation code."})]}),e.jsx(d,{type:"submit",className:"w-full",size:"lg",isLoading:g,children:"Continue"})]})}),e.jsxs("p",{className:"text-center text-[#707a8a] mt-6",children:["Already have an account?"," ",e.jsx(me,{to:"/login",className:"text-[#f0b90b] hover:text-[#d9a60a]",children:"Sign in"})]})]})})},k=m.forwardRef(({className:s,variant:t="default",children:a,...r},n)=>{const i={default:"bg-[#f5f5f5] text-[#707a8a] border border-[#eaecef]",success:"bg-[#e6f7f0] text-[#03a66d] border border-[#03a66d]/20",warning:"bg-[#fef6d8] text-[#c99400] border border-[#f0b90b]/20",danger:"bg-[#fce8eb] text-[#cf304a] border border-[#cf304a]/20",info:"bg-[#e6f4ff] text-[#0070f3] border border-[#0070f3]/20"};return e.jsx("span",{ref:n,className:he("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",i[t],s),...r,children:a})});k.displayName="Badge";const z=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(s),ke=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),B=s=>new Date(s).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),ts=s=>{const t=new Date(s),r=Math.floor((new Date().getTime()-t.getTime())/1e3);if(r<60)return"Just now";const n=Math.floor(r/60);if(n<60)return`${n} minute${n>1?"s":""} ago`;const i=Math.floor(n/60);if(i<24)return`${i} hour${i>1?"s":""} ago`;const x=Math.floor(i/24);return x<7?`${x} day${x>1?"s":""} ago`:ke(s)},xe=s=>`${s}%`,da=()=>{const s=de(),[t,a]=m.useState(!0),[r,n]=m.useState(null),[i,x]=m.useState([]),[c,j]=m.useState([]);if(m.useEffect(()=>{(async()=>{try{const N=await F.get("/admin/dashboard");n(N.data.data.stats),x(N.data.data.chart),j(N.data.data.recent_activity)}catch(N){console.error("Failed to fetch dashboard:",N)}finally{a(!1)}})()},[]),t)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(W,{size:"lg"})});const o=[{title:"Total Invested",value:z(r?.total_invested||0),icon:ee,color:"text-[#f0b90b]",bgColor:"bg-[#fef6d8]"},{title:"Interest Paid",value:z(r?.total_interest_paid||0),icon:pe,color:"text-[#03a66d]",bgColor:"bg-[#e6f7f0]"},{title:"Total Withdrawn",value:z(r?.total_withdrawn||0),icon:fe,color:"text-[#cf304a]",bgColor:"bg-[#fce8eb]"},{title:"Pending Interest",value:z(r?.total_interest_pending||0),icon:ve,color:"text-[#c99400]",bgColor:"bg-[#fef6d8]"},{title:"Active Members",value:r?.active_users?.toString()||"0",icon:ze,color:"text-[#0070f3]",bgColor:"bg-[#e6f4ff]"}];return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-[#1e2329]",children:"Dashboard"}),e.jsx("p",{className:"text-[#707a8a]",children:"Welcome back! Here's what's happening."})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6",children:o.map(u=>e.jsx(S,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-3 rounded-lg ${u.bgColor}`,children:e.jsx(u.icon,{className:`w-6 h-6 ${u.color}`})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:u.title}),e.jsx("p",{className:"text-xl font-bold text-[#1e2329]",children:u.value})]})]})},u.title))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[e.jsxs(S,{className:"lg:col-span-2",padding:"none",children:[e.jsx(K,{className:"p-4 sm:p-6 pb-0",children:e.jsx(X,{children:"Pending Requests"})}),e.jsxs("div",{className:"p-4 sm:p-6 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>s("/admin/topup-requests?status=pending"),className:"p-4 bg-[#f5f5f5] rounded-lg hover:bg-[#f0f0f0] transition-colors text-left",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-[#707a8a]",children:"Top-Up Requests"}),e.jsx(k,{variant:"warning",children:r?.pending_topups||0})]}),e.jsx("p",{className:"text-2xl font-bold text-[#1e2329]",children:r?.pending_topups||0}),e.jsx("p",{className:"text-sm text-[#707a8a]",children:"awaiting approval"})]}),e.jsxs("button",{onClick:()=>s("/admin/withdrawal-requests?status=pending"),className:"p-4 bg-[#f5f5f5] rounded-lg hover:bg-[#f0f0f0] transition-colors text-left",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-[#707a8a]",children:"Withdrawals"}),e.jsx(k,{variant:"warning",children:r?.pending_withdrawals||0})]}),e.jsx("p",{className:"text-2xl font-bold text-[#1e2329]",children:r?.pending_withdrawals||0}),e.jsx("p",{className:"text-sm text-[#707a8a]",children:"pending review"})]}),e.jsxs("button",{onClick:()=>s("/admin/withdrawal-requests?status=approved"),className:"p-4 bg-[#f5f5f5] rounded-lg hover:bg-[#f0f0f0] transition-colors text-left sm:col-span-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-[#707a8a]",children:"Ready for Payout"}),e.jsx(k,{variant:"info",children:r?.approved_withdrawals||0})]}),e.jsx("p",{className:"text-2xl font-bold text-[#1e2329]",children:r?.approved_withdrawals||0}),e.jsx("p",{className:"text-sm text-[#707a8a]",children:"approved, awaiting payout"})]})]})]}),e.jsxs(S,{padding:"none",children:[e.jsx(K,{className:"p-4 sm:p-6 pb-0",children:e.jsx(X,{children:"User Status"})}),e.jsxs("div",{className:"p-4 sm:p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[#707a8a]",children:"Active"}),e.jsx(k,{variant:"success",children:r?.active_users||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[#707a8a]",children:"Inactive"}),e.jsx(k,{variant:"warning",children:r?.inactive_users||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[#707a8a]",children:"Disabled"}),e.jsx(k,{variant:"danger",children:r?.disabled_users||0})]}),e.jsx("div",{className:"pt-4 border-t border-[#eaecef]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[#1e2329] font-medium",children:"Total Members"}),e.jsx("span",{className:"text-[#1e2329] font-bold",children:r?.total_members||0})]})})]})]})]}),e.jsxs(S,{padding:"none",children:[e.jsx(K,{className:"p-4 sm:p-6 pb-0",children:e.jsx(X,{children:"Recent Activity"})}),e.jsx("div",{className:"p-4 sm:p-6",children:c.length===0?e.jsx("p",{className:"text-[#707a8a] text-center py-8",children:"No recent activity"}):e.jsx("div",{className:"space-y-4",children:c.slice(0,10).map((u,N)=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between py-3 border-b border-[#eaecef] last:border-0 gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${u.type==="topup"?"bg-[#e6f7f0]":"bg-[#fce8eb]"}`,children:u.type==="topup"?e.jsx(pe,{className:"w-5 h-5 text-[#03a66d]"}):e.jsx(ee,{className:"w-5 h-5 text-[#cf304a]"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-[#1e2329]",children:[u.user," - ",u.type==="topup"?"Top-up":"Withdrawal"," ",e.jsx(k,{variant:u.action==="approved"||u.action==="paid"?"success":u.action==="rejected"?"danger":"warning",children:u.action})]}),e.jsx("p",{className:"text-sm text-[#707a8a]",children:ts(u.date)})]})]}),e.jsx("p",{className:"text-[#1e2329] font-medium sm:text-right",children:z(u.amount)})]},N))})})]})]})},ma=async s=>(await F.get("/admin/members",{params:s})).data,xa=async s=>(await F.get(`/admin/members/${s}`)).data,ha=async s=>(await F.get(`/admin/members/${s}/transactions`)).data,ua=async s=>(await F.get("/admin/members/export",{params:s,responseType:"blob"})).data,pa=()=>{const s=de(),[t]=qe(),[a,r]=m.useState(!0),[n,i]=m.useState([]),[x,c]=m.useState({current_page:1,last_page:1,per_page:15,total:0}),[j,o]=m.useState(t.get("search")||""),[u,N]=m.useState(t.get("status")||void 0),[y,g]=m.useState(!1),p=async(f=1)=>{r(!0);try{const R={page:f,per_page:15,sort:"created_at",direction:"desc"};j&&(R.search=j),u&&(R.status=u);const _=await ma(R);i(_.data),c(_.meta)}catch(R){console.error("Failed to fetch members:",R),v.error("Failed to load members")}finally{r(!1)}};m.useEffect(()=>{p()},[u]);const w=f=>{f.preventDefault(),p(1)},l=async()=>{g(!0);try{const f={};j&&(f.search=j),u&&(f.status=u);const R=await ua(f),_=window.URL.createObjectURL(R),A=document.createElement("a");A.href=_,A.download=`members-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(A),A.click(),window.URL.revokeObjectURL(_),document.body.removeChild(A),v.success("Export downloaded successfully")}catch{v.error("Failed to export members")}finally{g(!1)}},h=f=>{switch(f){case"active":return e.jsx(k,{variant:"success",children:"Active"});case"inactive":return e.jsx(k,{variant:"warning",children:"Inactive"});case"disabled":return e.jsx(k,{variant:"danger",children:"Disabled"});default:return e.jsx(k,{variant:"default",children:f})}};return a&&n.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(W,{size:"lg"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-[#1e2329]",children:"Members"}),e.jsx("p",{className:"text-[#707a8a]",children:"View and manage platform members"})]}),e.jsxs(d,{onClick:l,isLoading:y,variant:"secondary",children:[e.jsx(Je,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"Export"})]})]}),e.jsx(S,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("form",{onSubmit:w,className:"flex-1 flex gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx(O,{placeholder:"Search by name, username, or email...",value:j,onChange:f=>o(f.target.value),icon:e.jsx(ws,{className:"w-5 h-5"})})}),e.jsx(d,{type:"submit",children:"Search"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(d,{variant:u===void 0?"primary":"secondary",size:"sm",onClick:()=>N(void 0),children:"All"}),e.jsx(d,{variant:u==="active"?"primary":"secondary",size:"sm",onClick:()=>N("active"),children:"Active"}),e.jsx(d,{variant:u==="inactive"?"primary":"secondary",size:"sm",onClick:()=>N("inactive"),children:"Inactive"}),e.jsx(d,{variant:u==="disabled"?"primary":"secondary",size:"sm",onClick:()=>N("disabled"),children:"Disabled"})]})]})}),e.jsxs(S,{padding:"none",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-[#eaecef]",children:[e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"Member"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a] hidden sm:table-cell",children:"Interest Rate"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"Status"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a] hidden md:table-cell",children:"Last Login"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a] hidden lg:table-cell",children:"Registered"}),e.jsx("th",{className:"text-right px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-[#2d2d3a]",children:n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-[#707a8a]",children:"No members found"})}):n.map(f=>e.jsxs("tr",{className:"hover:bg-[#f5f5f5] transition-colors",children:[e.jsx("td",{className:"px-4 sm:px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-[#1e2329] font-medium",children:f.name}),e.jsxs("div",{className:"text-sm text-[#707a8a]",children:["@",f.username]}),f.email&&e.jsx("div",{className:"text-xs text-[#b7b9bc]",children:f.email})]})}),e.jsx("td",{className:"px-4 sm:px-6 py-4 text-[#1e2329] hidden sm:table-cell",children:f.default_interest_rate!==null?xe(f.default_interest_rate):"-"}),e.jsx("td",{className:"px-4 sm:px-6 py-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-1 sm:gap-2",children:[h(f.status),f.withdrawal_frozen&&e.jsx(k,{variant:"danger",children:"Frozen"})]})}),e.jsx("td",{className:"px-4 sm:px-6 py-4 text-[#474d57] hidden md:table-cell",children:f.last_login_at?B(f.last_login_at):"Never"}),e.jsx("td",{className:"px-4 sm:px-6 py-4 text-[#474d57] hidden lg:table-cell",children:B(f.created_at)}),e.jsx("td",{className:"px-4 sm:px-6 py-4",children:e.jsx("div",{className:"flex items-center justify-end",children:e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>s(`/admin/members/${f.id}`),title:"View Details",children:e.jsx(je,{className:"w-4 h-4"})})})})]},f.id))})]})}),x.last_page>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 sm:px-6 py-4 border-t border-[#eaecef]",children:[e.jsxs("div",{className:"text-sm text-[#707a8a]",children:[e.jsxs("span",{className:"hidden sm:inline",children:["Showing ",(x.current_page-1)*x.per_page+1," to"," ",Math.min(x.current_page*x.per_page,x.total)," of "]}),x.total," members"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"secondary",size:"sm",onClick:()=>p(x.current_page-1),disabled:x.current_page===1,children:e.jsx(ce,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-sm text-[#707a8a]",children:["Page ",x.current_page," of ",x.last_page]}),e.jsx(d,{variant:"secondary",size:"sm",onClick:()=>p(x.current_page+1),disabled:x.current_page===x.last_page,children:e.jsx(oe,{className:"w-4 h-4"})})]})]})]})]})},Z=({isOpen:s,onClose:t,title:a,children:r,size:n="md"})=>{const i={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"};return e.jsx(Hs,{show:s,children:e.jsxs(Gs,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(as,{enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(as,{enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Ks,{className:he("w-full transform overflow-hidden rounded-xl bg-white border border-[#eaecef] p-6 shadow-xl transition-all",i[n]),children:[a&&e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(Xs,{className:"text-lg font-semibold text-[#1e2329]",children:a}),e.jsx("button",{onClick:t,className:"text-[#707a8a] hover:text-[#1e2329] transition-colors",children:e.jsx(Fe,{className:"w-5 h-5"})})]}),r]})})})})]})})},fa=async s=>(await F.get("/admin/users",{params:s})).data,Ie=async s=>(await F.get(`/admin/users/${s}`)).data,qs=async(s,t)=>(await F.put(`/admin/users/${s}/status`,t)).data,ja=async s=>(await F.post(`/admin/users/${s}/force-logout`)).data,ga=async s=>(await F.post(`/admin/users/${s}/reset-password`)).data,$s=async s=>(await F.put(`/admin/users/${s}/freeze-withdrawal`)).data,Us=async(s,t)=>(await F.put(`/admin/users/${s}/interest-rate`,t)).data,ba=async(s,t)=>(await F.put(`/admin/users/${s}/profile`,t)).data,va=async(s,t)=>(await F.post(`/admin/users/${s}/adjust-balance`,t)).data,ya=()=>{const{id:s}=Ps(),t=de(),[a,r]=m.useState(!0),[n,i]=m.useState(null),[x,c]=m.useState(null),[j,o]=m.useState("investments"),[u,N]=m.useState(!1),[y,g]=m.useState(!1),[p,w]=m.useState(!1),[l,h]=m.useState(!1),[f,R]=m.useState(!1),[_,A]=m.useState({name:"",email:"",phone:""}),[P,q]=m.useState({amount:"",reason:"",type:"credit"}),[L,$]=m.useState(""),[Q,V]=m.useState("active"),M=async()=>{if(s)try{const[C,I]=await Promise.all([xa(Number(s)),ha(Number(s))]);i(C.data),c(I.data);const D=C.data.member;A({name:D.name||"",email:D.email||"",phone:D.phone||""}),$(String(D.default_interest_rate??"")),V(D.status)}catch(C){console.error("Failed to fetch member:",C),v.error("Failed to load member details")}finally{r(!1)}};m.useEffect(()=>{M()},[s]);const G=async()=>{if(s){R(!0);try{await ba(Number(s),{name:_.name,email:_.email,phone:_.phone||null}),v.success("Profile updated successfully"),N(!1),M()}catch(C){v.error(C.response?.data?.message||"Failed to update profile")}finally{R(!1)}}},b=async()=>{if(!s)return;const C=parseFloat(P.amount);if(isNaN(C)||C<=0){v.error("Please enter a valid amount");return}if(!P.reason.trim()){v.error("Please enter a reason");return}R(!0);try{const I=P.type==="debit"?-C:C;await va(Number(s),{amount:I,reason:P.reason}),v.success("Balance adjusted successfully"),g(!1),q({amount:"",reason:"",type:"credit"}),M()}catch(I){v.error(I.response?.data?.message||"Failed to adjust balance")}finally{R(!1)}},T=async()=>{if(!s)return;const C=parseFloat(L);if(isNaN(C)||C<0||C>100){v.error("Please enter a valid interest rate (0-100)");return}R(!0);try{await Us(Number(s),{interest_rate:C}),v.success("Interest rate updated successfully"),w(!1),M()}catch(I){v.error(I.response?.data?.message||"Failed to update interest rate")}finally{R(!1)}},re=async()=>{if(s){R(!0);try{await qs(Number(s),{status:Q}),v.success("Status updated successfully"),h(!1),M()}catch(C){v.error(C.response?.data?.message||"Failed to update status")}finally{R(!1)}}},ie=async()=>{if(s)try{await $s(Number(s)),v.success("Withdrawal freeze toggled"),M()}catch(C){v.error(C.response?.data?.message||"Failed to toggle withdrawal freeze")}};if(a)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(W,{size:"lg"})});if(!n)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-[#707a8a]",children:"Member not found"}),e.jsx(d,{className:"mt-4",onClick:()=>t("/admin/members"),children:"Back to Members"})]});const{member:H,stats:ue}=n,Be=[{title:"Total Invested",value:z(ue.total_invested),icon:ee,color:"text-[#f0b90b]",bgColor:"bg-[#fef6d8]"},{title:"Interest Earned",value:z(ue.total_interest_earned),icon:pe,color:"text-[#03a66d]",bgColor:"bg-[#e6f7f0]"},{title:"Available Balance",value:z(ue.available_balance),icon:fe,color:"text-[#0070f3]",bgColor:"bg-[#e6f4ff]",editable:!0},{title:"Total Withdrawn",value:z(ue.total_withdrawn),icon:ve,color:"text-[#c99400]",bgColor:"bg-[#fef6d8]"}],ge=C=>{switch(C){case"active":return e.jsx(k,{variant:"success",children:"Active"});case"inactive":return e.jsx(k,{variant:"warning",children:"Inactive"});case"disabled":return e.jsx(k,{variant:"danger",children:"Disabled"});case"pending":return e.jsx(k,{variant:"warning",children:"Pending"});case"approved":return e.jsx(k,{variant:"success",children:"Approved"});case"rejected":return e.jsx(k,{variant:"danger",children:"Rejected"});case"paid":return e.jsx(k,{variant:"info",children:"Paid"});case"paused":return e.jsx(k,{variant:"warning",children:"Paused"});case"completed":return e.jsx(k,{variant:"default",children:"Completed"});default:return e.jsx(k,{variant:"default",children:C})}};return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(d,{variant:"ghost",onClick:()=>t("/admin/members"),children:e.jsx(Le,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-[#1e2329]",children:H.name}),e.jsxs("p",{className:"text-[#707a8a]",children:["@",H.username]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[e.jsxs(S,{className:"lg:col-span-2",children:[e.jsx(K,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(X,{children:"Member Information"}),e.jsxs(d,{variant:"ghost",size:"sm",onClick:()=>N(!0),children:[e.jsx(Qe,{className:"w-4 h-4 mr-1"}),"Edit"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Email"}),e.jsx("p",{className:"text-[#1e2329]",children:H.email||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Phone"}),e.jsx("p",{className:"text-[#1e2329]",children:H.phone||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("button",{onClick:()=>h(!0),className:"hover:opacity-80 transition-opacity",children:ge(H.status)}),H.withdrawal_frozen&&e.jsx("button",{onClick:ie,className:"hover:opacity-80 transition-opacity",children:e.jsx(k,{variant:"danger",children:"Withdrawal Frozen"})})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Interest Rate"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-[#1e2329]",children:H.default_interest_rate!==null&&H.default_interest_rate!==void 0?xe(H.default_interest_rate):"Not set"}),e.jsx("button",{onClick:()=>w(!0),className:"text-[#707a8a] hover:text-[#1e2329]",children:e.jsx(Qe,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Registered"}),e.jsx("p",{className:"text-[#1e2329]",children:B(H.created_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Last Login"}),e.jsx("p",{className:"text-[#1e2329]",children:H.last_login_at?B(H.last_login_at):"Never"})]}),H.invitation_link&&e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Invitation Code"}),e.jsxs("p",{className:"text-[#1e2329]",children:[e.jsx("code",{className:"px-2 py-1 bg-[#f5f5f5] rounded",children:H.invitation_link.code}),e.jsxs("span",{className:"text-[#707a8a] ml-2",children:["(",xe(H.invitation_link.interest_rate)," rate)"]})]})]})]})]}),e.jsxs(S,{children:[e.jsx(K,{children:e.jsx(X,{children:"Quick Actions"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{variant:"secondary",className:"w-full justify-start",onClick:()=>g(!0),children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Adjust Balance"]}),e.jsx(d,{variant:"secondary",className:"w-full justify-start",onClick:ie,children:H.withdrawal_frozen?"Unfreeze Withdrawals":"Freeze Withdrawals"}),e.jsx(d,{variant:"secondary",className:"w-full justify-start",onClick:()=>t(`/admin/topup-requests?user_id=${H.id}`),children:"View Top-Up Requests"}),e.jsx(d,{variant:"secondary",className:"w-full justify-start",onClick:()=>t(`/admin/withdrawal-requests?user_id=${H.id}`),children:"View Withdrawals"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-1 lg:grid-cols-4 gap-4 sm:gap-6",children:Be.map(C=>e.jsx(S,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-3 rounded-lg ${C.bgColor}`,children:e.jsx(C.icon,{className:`w-6 h-6 ${C.color}`})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:C.title}),e.jsx("p",{className:"text-xl font-bold text-[#1e2329]",children:C.value})]})]}),C.editable&&e.jsx("button",{onClick:()=>g(!0),className:"p-2 text-[#707a8a] hover:text-[#1e2329] hover:bg-[#f5f5f5] rounded-lg transition-colors",children:e.jsx(Qe,{className:"w-4 h-4"})})]})},C.title))}),e.jsxs(S,{padding:"none",children:[e.jsx("div",{className:"border-b border-[#eaecef]",children:e.jsxs("div",{className:"flex overflow-x-auto",children:[e.jsxs("button",{onClick:()=>o("investments"),className:`px-4 sm:px-6 py-4 text-sm font-medium transition-colors whitespace-nowrap ${j==="investments"?"text-[#1e2329] border-b-2 border-[#f0b90b]":"text-[#707a8a] hover:text-[#1e2329]"}`,children:["Investments (",x?.investments?.length??0,")"]}),e.jsxs("button",{onClick:()=>o("topups"),className:`px-4 sm:px-6 py-4 text-sm font-medium transition-colors whitespace-nowrap ${j==="topups"?"text-[#1e2329] border-b-2 border-[#f0b90b]":"text-[#707a8a] hover:text-[#1e2329]"}`,children:["Top-Ups (",x?.topups?.length??0,")"]}),e.jsxs("button",{onClick:()=>o("withdrawals"),className:`px-4 sm:px-6 py-4 text-sm font-medium transition-colors whitespace-nowrap ${j==="withdrawals"?"text-[#1e2329] border-b-2 border-[#f0b90b]":"text-[#707a8a] hover:text-[#1e2329]"}`,children:["Withdrawals (",x?.withdrawals?.length??0,")"]})]})}),e.jsxs("div",{className:"p-4 sm:p-6",children:[j==="investments"&&e.jsx("div",{className:"space-y-4",children:x?.investments?.length?x.investments.map(C=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-4 bg-[#f5f5f5] rounded-lg gap-2 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[#1e2329] font-medium",children:z(C.amount)}),e.jsxs("p",{className:"text-sm text-[#707a8a]",children:[xe(C.interest_rate)," rate"]})]}),e.jsxs("div",{className:"sm:text-right",children:[e.jsxs("p",{className:"text-[#03a66d]",children:["+",z(C.interest_earned)]}),e.jsx("p",{className:"text-sm text-[#707a8a]",children:B(C.start_date)})]}),e.jsx("div",{children:ge(C.status)})]},C.id)):e.jsx("p",{className:"text-[#707a8a] text-center py-8",children:"No investments yet"})}),j==="topups"&&e.jsx("div",{className:"space-y-4",children:x?.topups?.length?x.topups.map(C=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-4 bg-[#f5f5f5] rounded-lg gap-2 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[#1e2329] font-medium",children:z(C.amount)}),e.jsx("p",{className:"text-sm text-[#707a8a]",children:C.payment_method||"N/A"})]}),e.jsx("div",{className:"sm:text-right",children:e.jsx("p",{className:"text-sm text-[#707a8a]",children:B(C.created_at)})}),e.jsx("div",{children:ge(C.status)})]},C.id)):e.jsx("p",{className:"text-[#707a8a] text-center py-8",children:"No top-up requests"})}),j==="withdrawals"&&e.jsx("div",{className:"space-y-4",children:x?.withdrawals?.length?x.withdrawals.map(C=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-4 bg-[#f5f5f5] rounded-lg gap-2 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[#1e2329] font-medium",children:z(C.amount)}),e.jsx("p",{className:"text-sm text-[#707a8a]",children:C.destination_type==="crypto_trc20"?"Crypto TRC 20":C.bank_name})]}),e.jsx("div",{className:"sm:text-right",children:e.jsx("p",{className:"text-sm text-[#707a8a]",children:B(C.created_at)})}),e.jsx("div",{children:ge(C.status)})]},C.id)):e.jsx("p",{className:"text-[#707a8a] text-center py-8",children:"No withdrawal requests"})})]})]}),e.jsx(Z,{isOpen:u,onClose:()=>N(!1),title:"Edit Profile",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(O,{label:"Name",value:_.name,onChange:C=>A({..._,name:C.target.value})}),e.jsx(O,{label:"Email",type:"email",value:_.email,onChange:C=>A({..._,email:C.target.value})}),e.jsx(O,{label:"Phone",value:_.phone,onChange:C=>A({..._,phone:C.target.value})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(d,{variant:"secondary",onClick:()=>N(!1),children:"Cancel"}),e.jsx(d,{onClick:G,isLoading:f,children:"Save Changes"})]})]})}),e.jsx(Z,{isOpen:y,onClose:()=>g(!1),title:"Adjust Balance",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a] mb-2",children:"Current Balance"}),e.jsx("p",{className:"text-2xl font-bold text-[#1e2329]",children:z(ue.available_balance)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#1e2329] mb-2",children:"Adjustment Type"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>q({...P,type:"credit"}),className:`flex-1 py-2 px-4 rounded-lg border-2 transition-colors flex items-center justify-center gap-2 ${P.type==="credit"?"border-[#03a66d] bg-[#e6f7f0] text-[#03a66d]":"border-[#eaecef] text-[#707a8a] hover:border-[#03a66d]"}`,children:[e.jsx(De,{className:"w-4 h-4"}),"Credit"]}),e.jsxs("button",{onClick:()=>q({...P,type:"debit"}),className:`flex-1 py-2 px-4 rounded-lg border-2 transition-colors flex items-center justify-center gap-2 ${P.type==="debit"?"border-[#cf304a] bg-[#fff0f0] text-[#cf304a]":"border-[#eaecef] text-[#707a8a] hover:border-[#cf304a]"}`,children:[e.jsx(Zs,{className:"w-4 h-4"}),"Debit"]})]})]}),e.jsx(O,{label:"Amount",type:"number",min:"0",step:"0.01",value:P.amount,onChange:C=>q({...P,amount:C.target.value}),placeholder:"0.00"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#1e2329] mb-1",children:"Reason"}),e.jsx("textarea",{value:P.reason,onChange:C=>q({...P,reason:C.target.value}),className:"w-full px-4 py-2 border border-[#eaecef] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#f0b90b] focus:border-transparent",rows:3,placeholder:"Enter reason for adjustment..."})]}),P.amount&&e.jsxs("div",{className:"p-3 bg-[#f5f5f5] rounded-lg",children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"New Balance"}),e.jsx("p",{className:`text-lg font-bold ${P.type==="credit"?"text-[#03a66d]":"text-[#cf304a]"}`,children:z(ue.available_balance+(P.type==="credit"?1:-1)*parseFloat(P.amount||"0"))})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(d,{variant:"secondary",onClick:()=>g(!1),children:"Cancel"}),e.jsx(d,{onClick:b,isLoading:f,children:"Adjust Balance"})]})]})}),e.jsx(Z,{isOpen:p,onClose:()=>w(!1),title:"Edit Interest Rate",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(O,{label:"Interest Rate (%)",type:"number",min:"0",max:"100",step:"0.01",value:L,onChange:C=>$(C.target.value),placeholder:"e.g. 5.00"}),e.jsx("p",{className:"text-sm text-[#707a8a]",children:"This will only affect new investments. Existing investments will keep their locked rate."}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(d,{variant:"secondary",onClick:()=>w(!1),children:"Cancel"}),e.jsx(d,{onClick:T,isLoading:f,children:"Save Changes"})]})]})}),e.jsx(Z,{isOpen:l,onClose:()=>h(!1),title:"Edit Status",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#1e2329] mb-2",children:"Status"}),e.jsxs("select",{value:Q,onChange:C=>V(C.target.value),className:"w-full px-4 py-2 border border-[#eaecef] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#f0b90b] focus:border-transparent",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"disabled",children:"Disabled"})]})]}),e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Changing status to inactive or disabled will pause the user's interest accrual."}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(d,{variant:"secondary",onClick:()=>h(!1),children:"Cancel"}),e.jsx(d,{onClick:re,isLoading:f,children:"Save Changes"})]})]})})]})},Na=async s=>(await F.get("/admin/topup-requests",{params:s})).data,wa=async s=>(await F.get(`/admin/topup-requests/${s}`)).data,_a=async(s,t)=>(await F.post(`/admin/topup-requests/${s}/approve`,t)).data,Sa=async(s,t)=>(await F.post(`/admin/topup-requests/${s}/reject`,t)).data,Ca=ae({rejection_reason:E().min(1,"Rejection reason is required"),admin_remarks:E().optional()}),ka=()=>{const[s]=qe(),[t,a]=m.useState(!0),[r,n]=m.useState([]),[i,x]=m.useState({current_page:1,last_page:1,per_page:15,total:0}),[c,j]=m.useState(s.get("status")||void 0),[o,u]=m.useState(null),[N,y]=m.useState(!1),[g,p]=m.useState(!1),[w,l]=m.useState(!1),h=Y({resolver:te(Ca)}),f=async(L=1)=>{a(!0);try{const $={page:L,per_page:15,sort:"created_at",direction:"desc"};c&&($.status=c);const Q=s.get("user_id");Q&&($.user_id=Number(Q));const V=await Na($);n(V.data),x(V.meta)}catch($){console.error("Failed to fetch requests:",$),v.error("Failed to load top-up requests")}finally{a(!1)}};m.useEffect(()=>{f()},[c,s]);const R=async L=>{try{const $=await wa(L.id);u($.data),y(!0)}catch{v.error("Failed to load request details")}},_=async L=>{if(confirm("Are you sure you want to approve this top-up request?")){l(!0);try{await _a(L.id),v.success("Top-up request approved successfully"),f(i.current_page),y(!1)}catch($){const Q=$;v.error(Q.response?.data?.message||"Failed to approve request")}finally{l(!1)}}},A=L=>{u(L),h.reset(),p(!0)},P=async L=>{if(o){l(!0);try{await Sa(o.id,L),v.success("Top-up request rejected"),f(i.current_page),p(!1),y(!1)}catch($){const Q=$;v.error(Q.response?.data?.message||"Failed to reject request")}finally{l(!1)}}},q=L=>{switch(L){case"pending":return e.jsx(k,{variant:"warning",children:"Pending"});case"approved":return e.jsx(k,{variant:"success",children:"Approved"});case"rejected":return e.jsx(k,{variant:"danger",children:"Rejected"});default:return e.jsx(k,{variant:"default",children:L})}};return t&&r.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(W,{size:"lg"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-[#1e2329]",children:"Top-Up Requests"}),e.jsx("p",{className:"text-[#707a8a]",children:"Review and process top-up requests"})]}),e.jsx(S,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[e.jsx("span",{className:"text-sm text-[#707a8a]",children:"Filter by status:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(d,{variant:c===void 0?"primary":"secondary",size:"sm",onClick:()=>j(void 0),children:"All"}),e.jsx(d,{variant:c==="pending"?"primary":"secondary",size:"sm",onClick:()=>j("pending"),children:"Pending"}),e.jsx(d,{variant:c==="approved"?"primary":"secondary",size:"sm",onClick:()=>j("approved"),children:"Approved"}),e.jsx(d,{variant:c==="rejected"?"primary":"secondary",size:"sm",onClick:()=>j("rejected"),children:"Rejected"})]})]})}),e.jsxs(S,{padding:"none",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-[#eaecef]",children:[e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a] hidden sm:table-cell",children:"ID"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a] hidden md:table-cell",children:"Date"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"Member"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"Amount"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a] hidden lg:table-cell",children:"Method"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"Status"}),e.jsx("th",{className:"text-right px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-[#2d2d3a]",children:r.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-[#707a8a]",children:"No top-up requests found"})}):r.map(L=>e.jsxs("tr",{className:"hover:bg-[#f5f5f5] transition-colors",children:[e.jsxs("td",{className:"px-4 sm:px-6 py-4 text-[#1e2329] font-mono hidden sm:table-cell",children:["#",L.id]}),e.jsx("td",{className:"px-4 sm:px-6 py-4 text-[#474d57] hidden md:table-cell",children:B(L.created_at)}),e.jsx("td",{className:"px-4 sm:px-6 py-4",children:L.user?e.jsxs("div",{children:[e.jsx("div",{className:"text-[#1e2329]",children:L.user.name}),e.jsxs("div",{className:"text-sm text-[#707a8a]",children:["@",L.user.username]})]}):e.jsx("span",{className:"text-[#707a8a]",children:"Unknown"})}),e.jsx("td",{className:"px-4 sm:px-6 py-4 text-[#1e2329] font-medium",children:z(L.amount)}),e.jsx("td",{className:"px-4 sm:px-6 py-4 text-[#474d57] hidden lg:table-cell",children:L.payment_method||"N/A"}),e.jsx("td",{className:"px-4 sm:px-6 py-4",children:q(L.status)}),e.jsx("td",{className:"px-4 sm:px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-1 sm:gap-2",children:[e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>R(L),title:"View Details",children:e.jsx(je,{className:"w-4 h-4"})}),L.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>_(L),title:"Approve",className:"text-[#03a66d] hover:text-emerald-300",children:e.jsx(Ee,{className:"w-4 h-4"})}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>A(L),title:"Reject",className:"text-[#cf304a] hover:text-red-300",children:e.jsx(Fe,{className:"w-4 h-4"})})]})]})})]},L.id))})]})}),i.last_page>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 sm:px-6 py-4 border-t border-[#eaecef]",children:[e.jsxs("div",{className:"text-sm text-[#707a8a]",children:[e.jsxs("span",{className:"hidden sm:inline",children:["Showing ",(i.current_page-1)*i.per_page+1," to"," ",Math.min(i.current_page*i.per_page,i.total)," of "]}),i.total," requests"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"secondary",size:"sm",onClick:()=>f(i.current_page-1),disabled:i.current_page===1,children:e.jsx(ce,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-sm text-[#707a8a]",children:["Page ",i.current_page," of ",i.last_page]}),e.jsx(d,{variant:"secondary",size:"sm",onClick:()=>f(i.current_page+1),disabled:i.current_page===i.last_page,children:e.jsx(oe,{className:"w-4 h-4"})})]})]})]}),e.jsx(Z,{isOpen:N,onClose:()=>{y(!1),u(null)},title:"Top-Up Request Details",size:"lg",children:o&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Request ID"}),e.jsxs("p",{className:"text-[#1e2329] font-mono",children:["#",o.id]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Status"}),e.jsx("div",{className:"mt-1",children:q(o.status)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Member"}),e.jsxs("p",{className:"text-[#1e2329]",children:[o.user?.name||"Unknown",e.jsxs("span",{className:"text-[#707a8a] ml-1",children:["(@",o.user?.username,")"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Amount"}),e.jsx("p",{className:"text-[#1e2329] text-xl font-bold",children:z(o.amount)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Payment Method"}),e.jsx("p",{className:"text-[#1e2329]",children:o.payment_method||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Submitted"}),e.jsx("p",{className:"text-[#1e2329]",children:B(o.created_at)})]})]}),o.notes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Notes"}),e.jsx("p",{className:"text-[#1e2329] mt-1",children:o.notes})]}),o.proof_of_payment_url&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a] mb-2",children:"Proof of Payment"}),e.jsx("a",{href:o.proof_of_payment_url,target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsxs("div",{className:"relative bg-[#f5f5f5] rounded-lg overflow-hidden",children:[e.jsx("img",{src:o.proof_of_payment_url,alt:"Proof of payment",className:"max-h-64 w-full object-contain"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 opacity-0 hover:opacity-100 transition-opacity",children:e.jsx(_s,{className:"w-8 h-8 text-[#1e2329]"})})]})})]}),o.status!=="pending"&&e.jsxs("div",{className:"pt-4 border-t border-[#eaecef]",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.processor&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Processed by"}),e.jsx("p",{className:"text-[#1e2329]",children:o.processor.name})]}),o.processed_at&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Processed at"}),e.jsx("p",{className:"text-[#1e2329]",children:B(o.processed_at)})]})]}),o.rejection_reason&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Rejection Reason"}),e.jsx("p",{className:"text-[#cf304a] mt-1",children:o.rejection_reason})]}),o.admin_remarks&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Admin Remarks"}),e.jsx("p",{className:"text-[#1e2329] mt-1",children:o.admin_remarks})]})]}),o.status==="pending"&&e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-[#eaecef]",children:[e.jsx(d,{variant:"danger",onClick:()=>{y(!1),A(o)},children:"Reject"}),e.jsx(d,{onClick:()=>_(o),isLoading:w,children:"Approve"})]})]})}),e.jsx(Z,{isOpen:g,onClose:()=>{p(!1),u(null)},title:"Reject Top-Up Request",children:e.jsxs("form",{onSubmit:h.handleSubmit(P),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:["Rejection Reason ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{...h.register("rejection_reason"),rows:3,className:"w-full px-4 py-2 bg-white border border-[#eaecef] rounded-lg text-[#1e2329] placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#f0b90b]",placeholder:"Explain why this request is being rejected..."}),h.formState.errors.rejection_reason&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:h.formState.errors.rejection_reason.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:"Admin Remarks (optional)"}),e.jsx("textarea",{...h.register("admin_remarks"),rows:2,className:"w-full px-4 py-2 bg-white border border-[#eaecef] rounded-lg text-[#1e2329] placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#f0b90b]",placeholder:"Any additional notes..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(d,{type:"button",variant:"secondary",onClick:()=>{p(!1),u(null)},children:"Cancel"}),e.jsx(d,{type:"submit",variant:"danger",isLoading:w,children:"Reject Request"})]})]})})]})},Fa=async s=>(await F.get("/admin/withdrawal-requests",{params:s})).data,Ra=async s=>(await F.get(`/admin/withdrawal-requests/${s}`)).data,Pa=async(s,t)=>(await F.post(`/admin/withdrawal-requests/${s}/approve`,t)).data,Aa=async(s,t)=>(await F.post(`/admin/withdrawal-requests/${s}/reject`,t)).data,Ia=async(s,t)=>(await F.post(`/admin/withdrawal-requests/${s}/paid`,t,{headers:{"Content-Type":"multipart/form-data"}})).data,Ma=ae({rejection_reason:E().min(1,"Rejection reason is required"),admin_remarks:E().optional()}),za=()=>{const[s]=qe(),[t,a]=m.useState(!0),[r,n]=m.useState([]),[i,x]=m.useState({current_page:1,last_page:1,per_page:15,total:0}),[c,j]=m.useState(s.get("status")||void 0),[o,u]=m.useState(null),[N,y]=m.useState(!1),[g,p]=m.useState(!1),[w,l]=m.useState(!1),[h,f]=m.useState(!1),[R,_]=m.useState(null),A=Y({resolver:te(Ma)}),P=async(b=1)=>{a(!0);try{const T={page:b,per_page:15,sort:"created_at",direction:"desc"};c&&(T.status=c);const re=s.get("user_id");re&&(T.user_id=Number(re));const ie=await Fa(T);n(ie.data),x(ie.meta)}catch(T){console.error("Failed to fetch requests:",T),v.error("Failed to load withdrawal requests")}finally{a(!1)}};m.useEffect(()=>{P()},[c,s]);const q=async b=>{try{const T=await Ra(b.id);u(T.data),y(!0)}catch{v.error("Failed to load request details")}},L=async b=>{if(confirm("Are you sure you want to approve this withdrawal request?")){f(!0);try{await Pa(b.id),v.success("Withdrawal request approved"),P(i.current_page),y(!1)}catch(T){const re=T;v.error(re.response?.data?.message||"Failed to approve request")}finally{f(!1)}}},$=b=>{u(b),A.reset(),p(!0)},Q=async b=>{if(o){f(!0);try{await Aa(o.id,b),v.success("Withdrawal request rejected"),P(i.current_page),p(!1),y(!1)}catch(T){const re=T;v.error(re.response?.data?.message||"Failed to reject request")}finally{f(!1)}}},V=b=>{u(b),_(null),l(!0)},M=async()=>{if(o){f(!0);try{const b=new FormData;R&&b.append("payout_proof",R),await Ia(o.id,b),v.success("Withdrawal marked as paid"),P(i.current_page),l(!1),y(!1)}catch(b){const T=b;v.error(T.response?.data?.message||"Failed to mark as paid")}finally{f(!1)}}},G=b=>{switch(b){case"pending":return e.jsx(k,{variant:"warning",children:"Pending"});case"approved":return e.jsx(k,{variant:"info",children:"Approved"});case"paid":return e.jsx(k,{variant:"success",children:"Paid"});case"rejected":return e.jsx(k,{variant:"danger",children:"Rejected"});default:return e.jsx(k,{variant:"default",children:b})}};return t&&r.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(W,{size:"lg"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-[#1e2329]",children:"Withdrawal Requests"}),e.jsx("p",{className:"text-[#707a8a]",children:"Review and process withdrawal requests"})]}),e.jsx(S,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[e.jsx("span",{className:"text-sm text-[#707a8a]",children:"Filter by status:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(d,{variant:c===void 0?"primary":"secondary",size:"sm",onClick:()=>j(void 0),children:"All"}),e.jsx(d,{variant:c==="pending"?"primary":"secondary",size:"sm",onClick:()=>j("pending"),children:"Pending"}),e.jsx(d,{variant:c==="approved"?"primary":"secondary",size:"sm",onClick:()=>j("approved"),children:"Approved"}),e.jsx(d,{variant:c==="paid"?"primary":"secondary",size:"sm",onClick:()=>j("paid"),children:"Paid"}),e.jsx(d,{variant:c==="rejected"?"primary":"secondary",size:"sm",onClick:()=>j("rejected"),children:"Rejected"})]})]})}),e.jsxs(S,{padding:"none",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-[#eaecef]",children:[e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a] hidden sm:table-cell",children:"ID"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a] hidden md:table-cell",children:"Date"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"Member"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"Amount"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a] hidden lg:table-cell",children:"Destination"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"Status"}),e.jsx("th",{className:"text-right px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-[#2d2d3a]",children:r.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-[#707a8a]",children:"No withdrawal requests found"})}):r.map(b=>e.jsxs("tr",{className:"hover:bg-[#f5f5f5] transition-colors",children:[e.jsxs("td",{className:"px-4 sm:px-6 py-4 text-[#1e2329] font-mono hidden sm:table-cell",children:["#",b.id]}),e.jsx("td",{className:"px-4 sm:px-6 py-4 text-[#474d57] hidden md:table-cell",children:B(b.created_at)}),e.jsx("td",{className:"px-4 sm:px-6 py-4",children:b.user?e.jsxs("div",{children:[e.jsx("div",{className:"text-[#1e2329]",children:b.user.name}),e.jsxs("div",{className:"text-sm text-[#707a8a]",children:["@",b.user.username]})]}):e.jsx("span",{className:"text-[#707a8a]",children:"Unknown"})}),e.jsx("td",{className:"px-4 sm:px-6 py-4 text-[#1e2329] font-medium",children:z(b.amount)}),e.jsx("td",{className:"px-4 sm:px-6 py-4 hidden lg:table-cell",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-[#1e2329]",children:b.destination_type==="crypto_trc20"?"Crypto TRC 20":b.bank_name}),e.jsx("div",{className:"text-sm text-[#707a8a]",children:b.account_number})]})}),e.jsx("td",{className:"px-4 sm:px-6 py-4",children:G(b.status)}),e.jsx("td",{className:"px-4 sm:px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-1 sm:gap-2",children:[e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>q(b),title:"View Details",children:e.jsx(je,{className:"w-4 h-4"})}),b.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>L(b),title:"Approve",className:"text-[#03a66d] hover:text-emerald-300",children:e.jsx(Ee,{className:"w-4 h-4"})}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>$(b),title:"Reject",className:"text-[#cf304a] hover:text-red-300",children:e.jsx(Fe,{className:"w-4 h-4"})})]}),b.status==="approved"&&e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>V(b),title:"Mark as Paid",className:"text-[#0070f3] hover:text-cyan-300",children:e.jsx(fe,{className:"w-4 h-4"})})]})})]},b.id))})]})}),i.last_page>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 sm:px-6 py-4 border-t border-[#eaecef]",children:[e.jsxs("div",{className:"text-sm text-[#707a8a]",children:[e.jsxs("span",{className:"hidden sm:inline",children:["Showing ",(i.current_page-1)*i.per_page+1," to"," ",Math.min(i.current_page*i.per_page,i.total)," of "]}),i.total," requests"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"secondary",size:"sm",onClick:()=>P(i.current_page-1),disabled:i.current_page===1,children:e.jsx(ce,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-sm text-[#707a8a]",children:["Page ",i.current_page," of ",i.last_page]}),e.jsx(d,{variant:"secondary",size:"sm",onClick:()=>P(i.current_page+1),disabled:i.current_page===i.last_page,children:e.jsx(oe,{className:"w-4 h-4"})})]})]})]}),e.jsx(Z,{isOpen:N,onClose:()=>{y(!1),u(null)},title:"Withdrawal Request Details",size:"lg",children:o&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Request ID"}),e.jsxs("p",{className:"text-[#1e2329] font-mono",children:["#",o.id]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Status"}),e.jsx("div",{className:"mt-1",children:G(o.status)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Member"}),e.jsxs("p",{className:"text-[#1e2329]",children:[o.user?.name||"Unknown",e.jsxs("span",{className:"text-[#707a8a] ml-1",children:["(@",o.user?.username,")"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Amount"}),e.jsx("p",{className:"text-[#1e2329] text-xl font-bold",children:z(o.amount)})]})]}),e.jsxs("div",{className:"p-4 bg-[#f5f5f5] rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-[#707a8a] mb-3",children:"Destination Details"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Type"}),e.jsx("p",{className:"text-[#1e2329]",children:o.destination_type==="crypto_trc20"?"Crypto TRC 20":"Bank Transfer"})]}),o.destination_type==="bank"&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Bank"}),e.jsx("p",{className:"text-[#1e2329]",children:o.bank_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Account Name"}),e.jsx("p",{className:"text-[#1e2329]",children:o.account_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Account Number"}),e.jsx("p",{className:"text-[#1e2329] font-mono",children:o.account_number})]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Submitted"}),e.jsx("p",{className:"text-[#1e2329]",children:B(o.created_at)})]}),o.status!=="pending"&&e.jsxs("div",{className:"pt-4 border-t border-[#eaecef]",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.processor&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Processed by"}),e.jsx("p",{className:"text-[#1e2329]",children:o.processor.name})]}),o.processed_at&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Processed at"}),e.jsx("p",{className:"text-[#1e2329]",children:B(o.processed_at)})]})]}),o.rejection_reason&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Rejection Reason"}),e.jsx("p",{className:"text-[#cf304a] mt-1",children:o.rejection_reason})]}),o.payout_proof_url&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-[#707a8a] mb-2",children:"Payout Proof"}),e.jsx("a",{href:o.payout_proof_url,target:"_blank",rel:"noopener noreferrer",className:"text-[#f0b90b] hover:text-indigo-300",children:"View Proof"})]})]}),o.status==="pending"&&e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-[#eaecef]",children:[e.jsx(d,{variant:"danger",onClick:()=>{y(!1),$(o)},children:"Reject"}),e.jsx(d,{onClick:()=>L(o),isLoading:h,children:"Approve"})]}),o.status==="approved"&&e.jsx("div",{className:"flex justify-end gap-3 pt-4 border-t border-[#eaecef]",children:e.jsxs(d,{onClick:()=>{y(!1),V(o)},children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Mark as Paid"]})})]})}),e.jsx(Z,{isOpen:g,onClose:()=>{p(!1),u(null)},title:"Reject Withdrawal Request",children:e.jsxs("form",{onSubmit:A.handleSubmit(Q),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:["Rejection Reason ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{...A.register("rejection_reason"),rows:3,className:"w-full px-4 py-2 bg-white border border-[#eaecef] rounded-lg text-[#1e2329] placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#f0b90b]",placeholder:"Explain why this request is being rejected..."}),A.formState.errors.rejection_reason&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:A.formState.errors.rejection_reason.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:"Admin Remarks (optional)"}),e.jsx("textarea",{...A.register("admin_remarks"),rows:2,className:"w-full px-4 py-2 bg-white border border-[#eaecef] rounded-lg text-[#1e2329] placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#f0b90b]",placeholder:"Any additional notes..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(d,{type:"button",variant:"secondary",onClick:()=>{p(!1),u(null)},children:"Cancel"}),e.jsx(d,{type:"submit",variant:"danger",isLoading:h,children:"Reject Request"})]})]})}),e.jsx(Z,{isOpen:w,onClose:()=>{l(!1),u(null),_(null)},title:"Mark as Paid",children:o&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-[#f5f5f5] rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Amount"}),e.jsx("p",{className:"text-xl font-bold text-[#1e2329]",children:z(o.amount)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"To"}),e.jsx("p",{className:"text-[#1e2329]",children:o.account_name}),e.jsx("p",{className:"text-sm text-[#707a8a]",children:o.account_number})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:"Payout Proof (optional)"}),e.jsx("input",{type:"file",accept:"image/*",onChange:b=>_(b.target.files?.[0]||null),className:"w-full px-4 py-2 bg-white border border-[#eaecef] rounded-lg text-[#1e2329] file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:bg-indigo-600 file:text-[#1e2329] file:cursor-pointer"}),e.jsx("p",{className:"mt-1 text-xs text-[#b7b9bc]",children:"Upload a screenshot of the payout confirmation"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(d,{variant:"secondary",onClick:()=>{l(!1),u(null),_(null)},children:"Cancel"}),e.jsx(d,{onClick:M,isLoading:h,children:"Confirm Paid"})]})]})})]})},La=async s=>(await F.get("/admin/invitation-links",{params:s})).data,Oa=async s=>(await F.post("/admin/invitation-links",s)).data,Ta=async(s,t)=>(await F.put(`/admin/invitation-links/${s}`,t)).data,Da=async s=>(await F.delete(`/admin/invitation-links/${s}`)).data,Ea=ae({interest_rate:ye().min(0,"Interest rate must be at least 0").max(100,"Interest rate cannot exceed 100"),assigned_role:As(["admin","member"]),max_uses:ye().min(1,"Must be at least 1").nullable().optional(),expires_at:E().nullable().optional(),notes:E().max(1e3,"Notes cannot exceed 1000 characters").nullable().optional()}),qa=ae({interest_rate:ye().min(0,"Interest rate must be at least 0").max(100,"Interest rate cannot exceed 100").optional(),max_uses:ye().min(1,"Must be at least 1").nullable().optional(),expires_at:E().nullable().optional(),notes:E().max(1e3,"Notes cannot exceed 1000 characters").nullable().optional(),is_active:ht().optional()}),$a=()=>{const[s,t]=m.useState(!0),[a,r]=m.useState([]),[n,i]=m.useState({current_page:1,last_page:1,per_page:15,total:0}),[x,c]=m.useState(void 0),[j,o]=m.useState(null),[u,N]=m.useState(!1),[y,g]=m.useState(!1),[p,w]=m.useState(!1),[l,h]=m.useState(null),[f,R]=m.useState(!1),_=Y({resolver:te(Ea),defaultValues:{interest_rate:5,assigned_role:"member",max_uses:null,expires_at:null,notes:null}}),A=Y({resolver:te(qa)}),P=async(b=1)=>{t(!0);try{const T=await La({page:b,per_page:15,active:x,sort:"created_at",direction:"desc"});r(T.data),i(T.meta)}catch(T){console.error("Failed to fetch invitation links:",T),v.error("Failed to load invitation links")}finally{t(!1)}};m.useEffect(()=>{P()},[x]);const q=async b=>{const T=`${window.location.origin}/register/${b.code}`;try{await navigator.clipboard.writeText(T),o(b.id),v.success("Link copied to clipboard"),setTimeout(()=>o(null),2e3)}catch{v.error("Failed to copy link")}},L=async b=>{R(!0);try{const T={interest_rate:b.interest_rate,assigned_role:b.assigned_role,max_uses:b.max_uses||null,expires_at:b.expires_at||null,notes:b.notes||null};await Oa(T),v.success("Invitation link created successfully"),N(!1),_.reset(),P()}catch(T){const ie=T.response?.data?.message||"Failed to create invitation link";v.error(ie)}finally{R(!1)}},$=b=>{h(b),A.reset({interest_rate:Number(b.interest_rate),max_uses:b.max_uses,expires_at:b.expires_at?b.expires_at.slice(0,16):null,notes:b.notes,is_active:b.is_active}),g(!0)},Q=async b=>{if(l){R(!0);try{const T={interest_rate:b.interest_rate,max_uses:b.max_uses||null,expires_at:b.expires_at||null,notes:b.notes||null,is_active:b.is_active};await Ta(l.id,T),v.success("Invitation link updated successfully"),g(!1),h(null),P()}catch(T){const ie=T.response?.data?.message||"Failed to update invitation link";v.error(ie)}finally{R(!1)}}},V=async b=>{if(confirm("Are you sure you want to deactivate this invitation link?"))try{await Da(b.id),v.success("Invitation link deactivated"),P()}catch{v.error("Failed to deactivate invitation link")}},M=b=>{h(b),w(!0)},G=b=>b.is_active?b.expires_at&&new Date(b.expires_at)<new Date?{label:"Expired",variant:"warning"}:b.max_uses!==null&&b.times_used>=b.max_uses?{label:"Exhausted",variant:"warning"}:{label:"Active",variant:"success"}:{label:"Inactive",variant:"danger"};return s&&a.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(W,{size:"lg"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-[#1e2329]",children:"Invitation Links"}),e.jsx("p",{className:"text-[#707a8a]",children:"Manage invitation codes for new user registration"})]}),e.jsxs(d,{onClick:()=>N(!0),children:[e.jsx(De,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Create Link"}),e.jsx("span",{className:"sm:hidden",children:"Create"})]})]}),e.jsx(S,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[e.jsx("span",{className:"text-sm text-[#707a8a]",children:"Filter by status:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(d,{variant:x===void 0?"primary":"secondary",size:"sm",onClick:()=>c(void 0),children:"All"}),e.jsx(d,{variant:x===!0?"primary":"secondary",size:"sm",onClick:()=>c(!0),children:"Active"}),e.jsx(d,{variant:x===!1?"primary":"secondary",size:"sm",onClick:()=>c(!1),children:"Inactive"})]})]})}),e.jsxs(S,{padding:"none",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-[#eaecef]",children:[e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"Code"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a] hidden sm:table-cell",children:"Interest Rate"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a] hidden md:table-cell",children:"Role"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"Usage"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a] hidden lg:table-cell",children:"Expires"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"Status"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a] hidden lg:table-cell",children:"Created"}),e.jsx("th",{className:"text-right px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-[#2d2d3a]",children:a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-12 text-center text-[#707a8a]",children:"No invitation links found"})}):a.map(b=>{const T=G(b);return e.jsxs("tr",{className:"hover:bg-[#f5f5f5] transition-colors",children:[e.jsx("td",{className:"px-4 sm:px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"w-4 h-4 text-[#b7b9bc] hidden sm:block"}),e.jsx("code",{className:"text-[#1e2329] font-mono text-xs sm:text-sm",children:b.code}),e.jsx("button",{onClick:()=>q(b),className:"p-1 text-[#707a8a] hover:text-[#1e2329] transition-colors",title:"Copy link",children:j===b.id?e.jsx(Js,{className:"w-4 h-4 text-[#03a66d]"}):e.jsx(rs,{className:"w-4 h-4"})})]})}),e.jsx("td",{className:"px-4 sm:px-6 py-4 text-[#1e2329] hidden sm:table-cell",children:xe(Number(b.interest_rate))}),e.jsx("td",{className:"px-4 sm:px-6 py-4 hidden md:table-cell",children:e.jsx(k,{variant:b.assigned_role==="admin"?"info":"default",children:b.assigned_role})}),e.jsxs("td",{className:"px-4 sm:px-6 py-4 text-[#1e2329]",children:[b.times_used,b.max_uses!==null&&` / ${b.max_uses}`,b.times_used>0&&e.jsx("button",{onClick:()=>M(b),className:"ml-2 text-[#f0b90b] hover:text-indigo-300 transition-colors",title:"View registrations",children:e.jsx(ze,{className:"w-4 h-4 inline"})})]}),e.jsx("td",{className:"px-4 sm:px-6 py-4 text-[#474d57] hidden lg:table-cell",children:b.expires_at?ke(b.expires_at):"Never"}),e.jsx("td",{className:"px-4 sm:px-6 py-4",children:e.jsx(k,{variant:T.variant,children:T.label})}),e.jsxs("td",{className:"px-4 sm:px-6 py-4 text-[#474d57] hidden lg:table-cell",children:[e.jsx("div",{className:"text-sm",children:B(b.created_at)}),b.creator&&e.jsxs("div",{className:"text-xs text-[#b7b9bc]",children:["by ",b.creator.name]})]}),e.jsx("td",{className:"px-4 sm:px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-1 sm:gap-2",children:[b.times_used>0&&e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>M(b),title:"View registrations",children:e.jsx(je,{className:"w-4 h-4"})}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>$(b),title:"Edit",children:e.jsx(Ys,{className:"w-4 h-4"})}),b.is_active&&e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>V(b),title:"Deactivate",className:"text-[#cf304a] hover:text-red-300",children:e.jsx(_e,{className:"w-4 h-4"})})]})})]},b.id)})})]})}),n.last_page>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 sm:px-6 py-4 border-t border-[#eaecef]",children:[e.jsxs("div",{className:"text-sm text-[#707a8a]",children:[e.jsxs("span",{className:"hidden sm:inline",children:["Showing ",(n.current_page-1)*n.per_page+1," to"," ",Math.min(n.current_page*n.per_page,n.total)," of "]}),n.total," links"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"secondary",size:"sm",onClick:()=>P(n.current_page-1),disabled:n.current_page===1,children:e.jsx(ce,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-sm text-[#707a8a]",children:["Page ",n.current_page," of ",n.last_page]}),e.jsx(d,{variant:"secondary",size:"sm",onClick:()=>P(n.current_page+1),disabled:n.current_page===n.last_page,children:e.jsx(oe,{className:"w-4 h-4"})})]})]})]}),e.jsx(Z,{isOpen:u,onClose:()=>N(!1),title:"Create Invitation Link",size:"lg",children:e.jsxs("form",{onSubmit:_.handleSubmit(L),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(O,{label:"Interest Rate (%)",type:"number",step:"0.01",..._.register("interest_rate"),error:_.formState.errors.interest_rate?.message}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:"Assigned Role"}),e.jsxs("select",{..._.register("assigned_role"),className:"w-full px-4 py-2 bg-white border border-[#eaecef] rounded-lg text-[#1e2329] focus:outline-none focus:ring-2 focus:ring-[#f0b90b]",children:[e.jsx("option",{value:"member",children:"Member"}),e.jsx("option",{value:"admin",children:"Admin"})]}),_.formState.errors.assigned_role&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:_.formState.errors.assigned_role.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(O,{label:"Max Uses (leave empty for unlimited)",type:"number",..._.register("max_uses"),error:_.formState.errors.max_uses?.message}),e.jsx(O,{label:"Expires At (optional)",type:"datetime-local",..._.register("expires_at"),error:_.formState.errors.expires_at?.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:"Notes (optional)"}),e.jsx("textarea",{..._.register("notes"),rows:3,className:"w-full px-4 py-2 bg-white border border-[#eaecef] rounded-lg text-[#1e2329] placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#f0b90b]",placeholder:"Add any notes about this invitation link..."}),_.formState.errors.notes&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:_.formState.errors.notes.message})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(d,{type:"button",variant:"secondary",onClick:()=>N(!1),children:"Cancel"}),e.jsx(d,{type:"submit",isLoading:f,children:"Create Link"})]})]})}),e.jsx(Z,{isOpen:y,onClose:()=>{g(!1),h(null)},title:"Edit Invitation Link",size:"lg",children:l&&e.jsxs("form",{onSubmit:A.handleSubmit(Q),className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-[#f5f5f5] rounded-lg mb-4",children:[e.jsx(Me,{className:"w-5 h-5 text-[#b7b9bc]"}),e.jsx("code",{className:"text-[#1e2329] font-mono text-lg",children:l.code}),e.jsx("button",{type:"button",onClick:()=>q(l),className:"ml-auto p-2 text-[#707a8a] hover:text-[#1e2329] transition-colors",children:e.jsx(rs,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(O,{label:"Interest Rate (%)",type:"number",step:"0.01",...A.register("interest_rate"),error:A.formState.errors.interest_rate?.message}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:"Status"}),e.jsxs("select",{...A.register("is_active"),className:"w-full px-4 py-2 bg-white border border-[#eaecef] rounded-lg text-[#1e2329] focus:outline-none focus:ring-2 focus:ring-[#f0b90b]",children:[e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(O,{label:"Max Uses",type:"number",...A.register("max_uses"),error:A.formState.errors.max_uses?.message}),e.jsx(O,{label:"Expires At",type:"datetime-local",...A.register("expires_at"),error:A.formState.errors.expires_at?.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:"Notes"}),e.jsx("textarea",{...A.register("notes"),rows:3,className:"w-full px-4 py-2 bg-white border border-[#eaecef] rounded-lg text-[#1e2329] placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#f0b90b]"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(d,{type:"button",variant:"secondary",onClick:()=>{g(!1),h(null)},children:"Cancel"}),e.jsx(d,{type:"submit",isLoading:f,children:"Save Changes"})]})]})}),e.jsx(Z,{isOpen:p,onClose:()=>{w(!1),h(null)},title:"Registrations",size:"lg",children:l&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-[#f5f5f5] rounded-lg mb-4",children:[e.jsx(Me,{className:"w-5 h-5 text-[#b7b9bc]"}),e.jsx("code",{className:"text-[#1e2329] font-mono",children:l.code}),e.jsxs(k,{variant:"default",className:"ml-auto",children:[l.times_used," registration",l.times_used!==1?"s":""]})]}),l.registrations&&l.registrations.length>0?e.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:l.registrations.map(b=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#f5f5f5] rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[#1e2329] font-medium",children:b.name}),e.jsxs("div",{className:"text-sm text-[#707a8a]",children:["@",b.username]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(k,{variant:b.status==="active"?"success":b.status==="inactive"?"warning":"danger",children:b.status}),e.jsx("div",{className:"text-xs text-[#b7b9bc] mt-1",children:ke(b.created_at)})]})]},b.id))}):e.jsx("div",{className:"text-center py-8 text-[#707a8a]",children:"No registrations yet"}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(d,{variant:"secondary",onClick:()=>{w(!1),h(null)},children:"Close"})})]})})]})},Ua=ae({status:As(["active","inactive","disabled"]),reason:E().optional()}),Ba=ae({interest_rate:ye().min(0).max(100),reason:E().optional()}),Wa=()=>{const[s]=qe(),[t,a]=m.useState(!0),[r,n]=m.useState([]),[i,x]=m.useState({current_page:1,last_page:1,per_page:15,total:0}),[c,j]=m.useState(s.get("search")||""),[o,u]=m.useState(void 0),[N,y]=m.useState(void 0),[g,p]=m.useState(null),[w,l]=m.useState(!1),[h,f]=m.useState(!1),[R,_]=m.useState(!1),[A,P]=m.useState(!1),[q,L]=m.useState(null),$=Y({resolver:te(Ua)}),Q=Y({resolver:te(Ba)}),V=async(I=1)=>{a(!0);try{const D={page:I,per_page:15,sort:"created_at",direction:"desc"};c&&(D.search=c),o&&(D.role=o),N&&(D.status=N);const se=await fa(D);n(se.data),x(se.meta)}catch(D){console.error("Failed to fetch users:",D),v.error("Failed to load users")}finally{a(!1)}};m.useEffect(()=>{V()},[o,N]);const M=I=>{I.preventDefault(),V(1)},G=async I=>{try{const D=await Ie(I.id);p(D.data),l(!0)}catch{v.error("Failed to load user details")}},b=I=>{p(I),$.reset({status:I.status}),f(!0)},T=async I=>{if(g){P(!0);try{await qs(g.id,I),v.success("User status updated"),f(!1),V(i.current_page);const D=await Ie(g.id);p(D.data)}catch(D){const se=D;v.error(se.response?.data?.message||"Failed to update status")}finally{P(!1)}}},re=async I=>{if(confirm(`Force logout ${I.name}? They will need to log in again.`)){P(!0);try{await ja(I.id),v.success("User has been logged out")}catch(D){const se=D;v.error(se.response?.data?.message||"Failed to force logout")}finally{P(!1)}}},ie=async I=>{if(confirm(`Reset password for ${I.name}? A temporary password will be generated.`)){P(!0);try{const D=await ga(I.id);L(D.data.temporary_password),v.success("Password has been reset")}catch(D){const se=D;v.error(se.response?.data?.message||"Failed to reset password")}finally{P(!1)}}},H=async I=>{const D=!I.withdrawal_frozen,se=D?"freeze":"unfreeze";if(confirm(`${D?"Freeze":"Unfreeze"} withdrawals for ${I.name}?`)){P(!0);try{await $s(I.id,D),v.success(`Withdrawals ${se}d successfully`);const We=await Ie(I.id);p(We.data),V(i.current_page)}catch(We){const Bs=We;v.error(Bs.response?.data?.message||`Failed to ${se} withdrawals`)}finally{P(!1)}}},ue=I=>{p(I),Q.reset({interest_rate:I.default_interest_rate||0}),_(!0)},Be=async I=>{if(g){P(!0);try{await Us(g.id,I),v.success("Interest rate updated"),_(!1);const D=await Ie(g.id);p(D.data),V(i.current_page)}catch(D){const se=D;v.error(se.response?.data?.message||"Failed to update interest rate")}finally{P(!1)}}},ge=I=>{switch(I){case"active":return e.jsx(k,{variant:"success",children:"Active"});case"inactive":return e.jsx(k,{variant:"warning",children:"Inactive"});case"disabled":return e.jsx(k,{variant:"danger",children:"Disabled"});default:return e.jsx(k,{variant:"default",children:I})}},C=I=>I==="admin"?e.jsx(k,{variant:"info",children:"Admin"}):e.jsx(k,{variant:"default",children:"Member"});return t&&r.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(W,{size:"lg"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-[#1e2329]",children:"User Management"}),e.jsx("p",{className:"text-[#707a8a]",children:"Manage user accounts and permissions"})]}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("form",{onSubmit:M,className:"flex gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx(O,{placeholder:"Search by name, username, or email...",value:c,onChange:I=>j(I.target.value),icon:e.jsx(ws,{className:"w-5 h-5"})})}),e.jsx(d,{type:"submit",children:"Search"})]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-[#707a8a]",children:"Role:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{variant:o===void 0?"primary":"secondary",size:"sm",onClick:()=>u(void 0),children:"All"}),e.jsx(d,{variant:o==="admin"?"primary":"secondary",size:"sm",onClick:()=>u("admin"),children:"Admin"}),e.jsx(d,{variant:o==="member"?"primary":"secondary",size:"sm",onClick:()=>u("member"),children:"Member"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-[#707a8a]",children:"Status:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{variant:N===void 0?"primary":"secondary",size:"sm",onClick:()=>y(void 0),children:"All"}),e.jsx(d,{variant:N==="active"?"primary":"secondary",size:"sm",onClick:()=>y("active"),children:"Active"}),e.jsx(d,{variant:N==="inactive"?"primary":"secondary",size:"sm",onClick:()=>y("inactive"),children:"Inactive"}),e.jsx(d,{variant:N==="disabled"?"primary":"secondary",size:"sm",onClick:()=>y("disabled"),children:"Disabled"})]})]})]})]})}),e.jsxs(S,{padding:"none",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-[#eaecef]",children:[e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"User"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a] hidden sm:table-cell",children:"Role"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"Status"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a] hidden md:table-cell",children:"Interest Rate"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a] hidden lg:table-cell",children:"Last Login"}),e.jsx("th",{className:"text-right px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-[#2d2d3a]",children:r.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-[#707a8a]",children:"No users found"})}):r.map(I=>e.jsxs("tr",{className:"hover:bg-[#f5f5f5] transition-colors",children:[e.jsx("td",{className:"px-4 sm:px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-[#1e2329] font-medium",children:I.name}),e.jsxs("div",{className:"text-sm text-[#707a8a]",children:["@",I.username]}),I.email&&e.jsx("div",{className:"text-xs text-[#b7b9bc]",children:I.email})]})}),e.jsx("td",{className:"px-4 sm:px-6 py-4 hidden sm:table-cell",children:C(I.role)}),e.jsx("td",{className:"px-4 sm:px-6 py-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-1 sm:gap-2",children:[ge(I.status),I.withdrawal_frozen&&e.jsx(k,{variant:"danger",children:"Frozen"})]})}),e.jsx("td",{className:"px-4 sm:px-6 py-4 text-[#1e2329] hidden md:table-cell",children:I.default_interest_rate!==null?xe(I.default_interest_rate):"-"}),e.jsx("td",{className:"px-4 sm:px-6 py-4 text-[#474d57] hidden lg:table-cell",children:I.last_login_at?B(I.last_login_at):"Never"}),e.jsx("td",{className:"px-4 sm:px-6 py-4",children:e.jsx("div",{className:"flex items-center justify-end",children:e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>G(I),title:"Manage User",children:e.jsx(je,{className:"w-4 h-4"})})})})]},I.id))})]})}),i.last_page>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 sm:px-6 py-4 border-t border-[#eaecef]",children:[e.jsxs("div",{className:"text-sm text-[#707a8a]",children:[e.jsxs("span",{className:"hidden sm:inline",children:["Showing ",(i.current_page-1)*i.per_page+1," to"," ",Math.min(i.current_page*i.per_page,i.total)," of "]}),i.total," users"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"secondary",size:"sm",onClick:()=>V(i.current_page-1),disabled:i.current_page===1,children:e.jsx(ce,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-sm text-[#707a8a]",children:["Page ",i.current_page," of ",i.last_page]}),e.jsx(d,{variant:"secondary",size:"sm",onClick:()=>V(i.current_page+1),disabled:i.current_page===i.last_page,children:e.jsx(oe,{className:"w-4 h-4"})})]})]})]}),e.jsx(Z,{isOpen:w,onClose:()=>{l(!1),p(null),L(null)},title:"Manage User",size:"lg",children:g&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-[#1e2329]",children:g.name}),e.jsxs("p",{className:"text-[#707a8a]",children:["@",g.username]}),g.email&&e.jsx("p",{className:"text-sm text-[#b7b9bc]",children:g.email})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[C(g.role),ge(g.status),g.withdrawal_frozen&&e.jsx(k,{variant:"danger",children:"Frozen"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 p-4 bg-[#f5f5f5] rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Interest Rate"}),e.jsx("p",{className:"text-[#1e2329]",children:g.default_interest_rate!==null?xe(g.default_interest_rate):"Not set"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Last Login"}),e.jsx("p",{className:"text-[#1e2329]",children:g.last_login_at?B(g.last_login_at):"Never"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Registered"}),e.jsx("p",{className:"text-[#1e2329]",children:B(g.created_at)})]}),g.invitation_link&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Invitation Code"}),e.jsx("p",{className:"text-[#1e2329] font-mono",children:g.invitation_link.code})]})]}),q&&e.jsxs("div",{className:"p-4 bg-[#e6f7f0] border border-[#03a66d]/30 rounded-lg",children:[e.jsx("p",{className:"text-sm text-[#03a66d] mb-2",children:"Temporary Password"}),e.jsx("code",{className:"text-[#1e2329] text-lg font-mono",children:q}),e.jsx("p",{className:"text-xs text-[#707a8a] mt-2",children:"Share this password with the user. They should change it after logging in."})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs(d,{variant:"secondary",onClick:()=>b(g),className:"justify-start",children:[e.jsx(et,{className:"w-4 h-4 mr-2"}),"Change Status"]}),e.jsxs(d,{variant:"secondary",onClick:()=>ue(g),className:"justify-start",children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Adjust Interest Rate"]}),e.jsxs(d,{variant:"secondary",onClick:()=>H(g),disabled:A,className:"justify-start",children:[e.jsx(st,{className:"w-4 h-4 mr-2"}),g.withdrawal_frozen?"Unfreeze Withdrawals":"Freeze Withdrawals"]}),e.jsxs(d,{variant:"secondary",onClick:()=>re(g),disabled:A,className:"justify-start",children:[e.jsx(vs,{className:"w-4 h-4 mr-2"}),"Force Logout"]}),e.jsxs(d,{variant:"secondary",onClick:()=>ie(g),disabled:A,className:"justify-start sm:col-span-2",children:[e.jsx(tt,{className:"w-4 h-4 mr-2"}),"Reset Password"]})]})]})}),e.jsx(Z,{isOpen:h,onClose:()=>{f(!1)},title:"Change User Status",children:e.jsxs("form",{onSubmit:$.handleSubmit(T),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:"Status"}),e.jsxs("select",{...$.register("status"),className:"w-full px-4 py-2 bg-white border border-[#eaecef] rounded-lg text-[#1e2329] focus:outline-none focus:ring-2 focus:ring-[#f0b90b]",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"disabled",children:"Disabled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:"Reason (optional)"}),e.jsx("textarea",{...$.register("reason"),rows:3,className:"w-full px-4 py-2 bg-white border border-[#eaecef] rounded-lg text-[#1e2329] placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#f0b90b]",placeholder:"Reason for status change..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(d,{type:"button",variant:"secondary",onClick:()=>f(!1),children:"Cancel"}),e.jsx(d,{type:"submit",isLoading:A,children:"Update Status"})]})]})}),e.jsx(Z,{isOpen:R,onClose:()=>{_(!1)},title:"Adjust Interest Rate",children:e.jsxs("form",{onSubmit:Q.handleSubmit(Be),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:"Interest Rate (%)"}),e.jsx(O,{type:"number",step:"0.01",...Q.register("interest_rate"),error:Q.formState.errors.interest_rate?.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:"Reason (optional)"}),e.jsx("textarea",{...Q.register("reason"),rows:3,className:"w-full px-4 py-2 bg-white border border-[#eaecef] rounded-lg text-[#1e2329] placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#f0b90b]",placeholder:"Reason for interest rate change..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(d,{type:"button",variant:"secondary",onClick:()=>_(!1),children:"Cancel"}),e.jsx(d,{type:"submit",isLoading:A,children:"Update Rate"})]})]})})]})},Qa=async s=>(await F.get("/admin/audit-logs",{params:s})).data,Va=async s=>(await F.get(`/admin/audit-logs/${s}`)).data,Ha=async()=>(await F.get("/admin/audit-logs/actions")).data,Ga=()=>{const[s,t]=m.useState(!0),[a,r]=m.useState([]),[n,i]=m.useState({current_page:1,last_page:1,per_page:15,total:0}),[x,c]=m.useState([]),[j,o]=m.useState(void 0),[u,N]=m.useState(""),[y,g]=m.useState(""),[p,w]=m.useState(null),[l,h]=m.useState(!1),[f,R]=m.useState(!1),_=async(M=1)=>{t(!0);try{const G={page:M,per_page:15,sort:"created_at",direction:"desc"};j&&(G.action=j),u&&(G.date_from=u),y&&(G.date_to=y);const b=await Qa(G);r(b.data),i(b.meta)}catch(G){console.error("Failed to fetch audit logs:",G),v.error("Failed to load audit logs")}finally{t(!1)}},A=async()=>{try{const M=await Ha();c(M.data)}catch(M){console.error("Failed to fetch actions:",M)}};m.useEffect(()=>{A(),_()},[]);const P=()=>{_(1)},q=()=>{o(void 0),N(""),g(""),_(1)},L=async M=>{try{const G=await Va(M.id);w(G.data),h(!0)}catch{v.error("Failed to load log details")}},$=M=>{const G={create:"success",update:"info",delete:"danger",approve:"success",reject:"danger",status_change:"warning",force_logout:"warning",password_reset:"info",interest_rate_change:"info",withdrawal_freeze:"warning",withdrawal_unfreeze:"success"};return e.jsx(k,{variant:G[M]||"default",children:M.replace(/_/g," ")})},Q=M=>M.split("\\").pop()||M,V=M=>M==null?"null":typeof M=="object"?JSON.stringify(M,null,2):String(M);return s&&a.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(W,{size:"lg"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-[#1e2329]",children:"Audit Logs"}),e.jsx("p",{className:"text-[#707a8a]",children:"Track all administrative actions"})]}),e.jsxs(d,{variant:"secondary",onClick:()=>R(!f),children:[e.jsx(at,{className:"w-5 h-5 mr-2"}),"Filters"]})]}),f&&e.jsx(S,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:"Action"}),e.jsxs("select",{value:j||"",onChange:M=>o(M.target.value||void 0),className:"w-full px-4 py-2 bg-white border border-[#eaecef] rounded-lg text-[#1e2329] focus:outline-none focus:ring-2 focus:ring-[#f0b90b]",children:[e.jsx("option",{value:"",children:"All Actions"}),x.map(M=>e.jsx("option",{value:M,children:M.replace(/_/g," ")},M))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:"From Date"}),e.jsx("input",{type:"date",value:u,onChange:M=>N(M.target.value),className:"w-full px-4 py-2 bg-white border border-[#eaecef] rounded-lg text-[#1e2329] focus:outline-none focus:ring-2 focus:ring-[#f0b90b]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:"To Date"}),e.jsx("input",{type:"date",value:y,onChange:M=>g(M.target.value),className:"w-full px-4 py-2 bg-white border border-[#eaecef] rounded-lg text-[#1e2329] focus:outline-none focus:ring-2 focus:ring-[#f0b90b]"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(d,{variant:"secondary",onClick:q,children:"Clear"}),e.jsx(d,{onClick:P,children:"Apply Filters"})]})]})}),e.jsxs(S,{padding:"none",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-[#eaecef]",children:[e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a] hidden md:table-cell",children:"Date"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"User"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"Action"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a] hidden sm:table-cell",children:"Target"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a] hidden lg:table-cell",children:"Description"}),e.jsx("th",{className:"text-right px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"Details"})]})}),e.jsx("tbody",{className:"divide-y divide-[#2d2d3a]",children:a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-[#707a8a]",children:"No audit logs found"})}):a.map(M=>e.jsxs("tr",{className:"hover:bg-[#f5f5f5] transition-colors",children:[e.jsx("td",{className:"px-4 sm:px-6 py-4 text-[#474d57] hidden md:table-cell",children:B(M.created_at)}),e.jsx("td",{className:"px-4 sm:px-6 py-4",children:M.user?e.jsxs("div",{children:[e.jsx("div",{className:"text-[#1e2329]",children:M.user.name}),e.jsxs("div",{className:"text-sm text-[#707a8a]",children:["@",M.user.username]})]}):e.jsx("span",{className:"text-[#707a8a]",children:"System"})}),e.jsx("td",{className:"px-4 sm:px-6 py-4",children:$(M.action)}),e.jsxs("td",{className:"px-4 sm:px-6 py-4 text-[#474d57] hidden sm:table-cell",children:[Q(M.auditable_type)," #",M.auditable_id]}),e.jsx("td",{className:"px-4 sm:px-6 py-4 text-[#1e2329] max-w-xs truncate hidden lg:table-cell",children:M.description||"-"}),e.jsx("td",{className:"px-4 sm:px-6 py-4",children:e.jsx("div",{className:"flex items-center justify-end",children:e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>L(M),title:"View Details",children:e.jsx(je,{className:"w-4 h-4"})})})})]},M.id))})]})}),n.last_page>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 sm:px-6 py-4 border-t border-[#eaecef]",children:[e.jsxs("div",{className:"text-sm text-[#707a8a]",children:[e.jsxs("span",{className:"hidden sm:inline",children:["Showing ",(n.current_page-1)*n.per_page+1," to"," ",Math.min(n.current_page*n.per_page,n.total)," of "]}),n.total," logs"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"secondary",size:"sm",onClick:()=>_(n.current_page-1),disabled:n.current_page===1,children:e.jsx(ce,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-sm text-[#707a8a]",children:["Page ",n.current_page," of ",n.last_page]}),e.jsx(d,{variant:"secondary",size:"sm",onClick:()=>_(n.current_page+1),disabled:n.current_page===n.last_page,children:e.jsx(oe,{className:"w-4 h-4"})})]})]})]}),e.jsx(Z,{isOpen:l,onClose:()=>{h(!1),w(null)},title:"Audit Log Details",size:"lg",children:p&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Date"}),e.jsx("p",{className:"text-[#1e2329]",children:B(p.created_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Action"}),e.jsx("div",{className:"mt-1",children:$(p.action)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Performed By"}),e.jsx("p",{className:"text-[#1e2329]",children:p.user?`${p.user.name} (@${p.user.username})`:"System"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Target"}),e.jsxs("p",{className:"text-[#1e2329]",children:[Q(p.auditable_type)," #",p.auditable_id]})]}),p.ip_address&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"IP Address"}),e.jsx("p",{className:"text-[#1e2329] font-mono",children:p.ip_address})]})]}),p.description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Description"}),e.jsx("p",{className:"text-[#1e2329] mt-1",children:p.description})]}),(p.old_values||p.new_values)&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium text-[#474d57]",children:"Changes"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[p.old_values&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a] mb-2",children:"Before"}),e.jsx("pre",{className:"p-3 bg-[#f5f5f5] rounded-lg text-sm text-[#474d57] overflow-auto max-h-48",children:V(p.old_values)})]}),p.new_values&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a] mb-2",children:"After"}),e.jsx("pre",{className:"p-3 bg-[#f5f5f5] rounded-lg text-sm text-[#474d57] overflow-auto max-h-48",children:V(p.new_values)})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(d,{variant:"secondary",onClick:()=>{h(!1),w(null)},children:"Close"})})]})})]})},Ka=async()=>(await F.get("/admin/settings")).data,Xa=async s=>{const t=Object.entries(s).map(([r,n])=>({key:r,value:String(n)}));return(await F.put("/admin/settings",{settings:t})).data},Za=()=>{const[s,t]=m.useState(!0),[a,r]=m.useState(!1),[n,i]=m.useState({}),{register:x,handleSubmit:c,reset:j,formState:{isDirty:o}}=Y(),u=async()=>{try{const h=await Ka();i(h.data);const f={};Object.values(h.data).flat().forEach(R=>{f[R.key]=R.value}),j(f)}catch(h){console.error("Failed to fetch settings:",h),v.error("Failed to load settings")}finally{t(!1)}};m.useEffect(()=>{u()},[]);const N=async h=>{r(!0);try{await Xa(h),v.success("Settings saved successfully"),u()}catch(f){const R=f;v.error(R.response?.data?.message||"Failed to save settings")}finally{r(!1)}},y=h=>{switch(h){case"interest":return e.jsx(ee,{className:"w-5 h-5"});case"withdrawal":return e.jsx(ve,{className:"w-5 h-5"});case"security":return e.jsx(Ye,{className:"w-5 h-5"});default:return e.jsx(bs,{className:"w-5 h-5"})}},g=h=>h.charAt(0).toUpperCase()+h.slice(1).replace(/_/g," ")+" Settings",p=h=>{const f=["integer","int","decimal","float","double","number"].includes(h.type),R=["decimal","float","double"].includes(h.type);switch(h.type){case"boolean":case"bool":return e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",...x(h.key),className:"w-5 h-5 rounded border-[#eaecef] bg-white text-[#f0b90b] focus:ring-[#f0b90b]"}),e.jsx("span",{className:"text-[#1e2329]",children:h.description||h.key})]});case"select":return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:h.description||h.key}),e.jsxs("select",{...x(h.key),className:"w-full px-4 py-2 bg-white border border-[#eaecef] rounded-lg text-[#1e2329] focus:outline-none focus:ring-2 focus:ring-[#f0b90b]",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"})]})]});default:return f?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:h.description||h.key}),e.jsx(O,{type:"number",step:R?"0.01":"1",...x(h.key)})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:h.description||h.key}),e.jsx(O,{type:"text",...x(h.key)})]})}};if(s)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(W,{size:"lg"})});const w=["interest","withdrawal","topup","security","general"],l=Object.keys(n).sort((h,f)=>w.indexOf(h)-w.indexOf(f));return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-[#1e2329]",children:"Settings"}),e.jsx("p",{className:"text-[#707a8a]",children:"Configure system settings and preferences"})]}),o&&e.jsx(d,{onClick:c(N),isLoading:a,children:"Save Changes"})]}),e.jsxs("form",{onSubmit:c(N),className:"space-y-6",children:[l.map(h=>e.jsxs(S,{children:[e.jsx(K,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-[#fef6d8] rounded-lg text-[#f0b90b]",children:y(h)}),e.jsx(X,{children:g(h)})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:n[h].map(f=>e.jsx("div",{children:p(f)},f.key))})]},h)),Object.keys(n).length===0&&e.jsx(S,{children:e.jsx("div",{className:"text-center py-8 text-[#707a8a]",children:"No settings configured yet"})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(d,{type:"submit",isLoading:a,children:"Save All Settings"})})]})]})},Ja=async s=>(await F.get("/admin/notifications",{params:s})).data,Ya=async s=>(await F.put(`/admin/notifications/${s}/read`)).data,er=async()=>(await F.put("/admin/notifications/read-all")).data,sr=async s=>(await F.delete(`/admin/notifications/${s}`)).data,tr=async()=>(await F.delete("/admin/notifications")).data,ar=()=>{const[s,t]=m.useState(!0),[a,r]=m.useState([]),[n,i]=m.useState({current_page:1,last_page:1,per_page:15,total:0}),[x,c]=m.useState(!1),j=async(l=1)=>{t(!0);try{const f=await Ja({page:l,per_page:15,unread_only:x||void 0});r(f.data||[]),i(f.meta)}catch(h){console.error("Failed to fetch notifications:",h),v.error("Failed to load notifications")}finally{t(!1)}};m.useEffect(()=>{j()},[x]);const o=async l=>{if(!l.read_at)try{await Ya(l.id),r(h=>h.map(f=>f.id===l.id?{...f,read_at:new Date().toISOString()}:f))}catch{v.error("Failed to mark as read")}},u=async()=>{try{await er(),r(l=>l.map(h=>({...h,read_at:h.read_at||new Date().toISOString()}))),v.success("All notifications marked as read")}catch{v.error("Failed to mark all as read")}},N=async(l,h)=>{l.stopPropagation();try{await sr(h.id),r(f=>f.filter(R=>R.id!==h.id)),i(f=>({...f,total:f.total-1})),v.success("Notification deleted")}catch{v.error("Failed to delete notification")}},y=async()=>{if(confirm("Are you sure you want to clear all notifications? This cannot be undone."))try{await tr(),r([]),i({current_page:1,last_page:1,per_page:15,total:0}),v.success("All notifications cleared")}catch{v.error("Failed to clear notifications")}},g=l=>{switch(l){case"new_topup_request":case"topup_processed":return e.jsx(ee,{className:"w-5 h-5"});case"new_withdrawal_request":case"withdrawal_processed":return e.jsx(ee,{className:"w-5 h-5"});case"new_member_registered":case"member_status_changed":return e.jsx(ys,{className:"w-5 h-5"});case"system_alert":return e.jsx(Cs,{className:"w-5 h-5"});default:return e.jsx(Ss,{className:"w-5 h-5"})}},p=l=>l.includes("approved")||l.includes("completed")||l.includes("success")?"bg-[#e6f7f0] text-[#03a66d]":l.includes("rejected")||l.includes("failed")||l.includes("alert")?"bg-[#fce8eb] text-[#cf304a]":l.includes("pending")||l.includes("new_")?"bg-[#fef6d8] text-[#c99400]":"bg-[#fef6d8] text-[#f0b90b]",w=a.filter(l=>!l.read_at).length;return s&&a.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(W,{size:"lg"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-[#1e2329]",children:"Notifications"}),e.jsx("p",{className:"text-[#707a8a]",children:"System alerts and activity updates"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[w>0&&e.jsxs(d,{variant:"secondary",onClick:u,children:[e.jsx(Ee,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Mark All as Read"}),e.jsx("span",{className:"sm:hidden",children:"Mark Read"})]}),a.length>0&&e.jsxs(d,{variant:"danger",onClick:y,children:[e.jsx(_e,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Clear All"}),e.jsx("span",{className:"sm:hidden",children:"Clear"})]})]})]}),e.jsx(S,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[e.jsx("span",{className:"text-sm text-[#707a8a]",children:"Show:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(d,{variant:x?"secondary":"primary",size:"sm",onClick:()=>c(!1),children:"All"}),e.jsxs(d,{variant:x?"primary":"secondary",size:"sm",onClick:()=>c(!0),children:["Unread Only",w>0&&e.jsx(k,{variant:"warning",className:"ml-2",children:w})]})]})]})}),e.jsx("div",{className:"space-y-3",children:a.length===0?e.jsx(S,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-[#707a8a]",children:[e.jsx(Re,{className:"w-12 h-12 mb-4"}),e.jsx("p",{children:"No notifications yet"})]})}):a.map(l=>e.jsx(S,{className:`cursor-pointer transition-colors ${l.read_at?"":"border-l-4 border-l-[#f0b90b]"}`,onClick:()=>o(l),children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${p(l.type)}`,children:g(l.type)}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-[#1e2329] font-medium",children:l.title}),e.jsx("p",{className:"text-[#707a8a] mt-1",children:l.message})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("span",{className:"text-xs text-[#b7b9bc]",children:ts(l.created_at)}),!l.read_at&&e.jsx("div",{className:"w-2 h-2 bg-[#f0b90b] rounded-full"}),e.jsx("button",{onClick:h=>N(h,l),className:"p-1 text-[#b7b9bc] hover:text-[#cf304a] transition-colors",title:"Delete notification",children:e.jsx(_e,{className:"w-4 h-4"})})]})]})})]})},l.id))}),n.last_page>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"text-sm text-[#707a8a]",children:[e.jsxs("span",{className:"hidden sm:inline",children:["Showing ",(n.current_page-1)*n.per_page+1," to"," ",Math.min(n.current_page*n.per_page,n.total)," of "]}),n.total," notifications"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"secondary",size:"sm",onClick:()=>j(n.current_page-1),disabled:n.current_page===1,children:e.jsx(ce,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-sm text-[#707a8a]",children:["Page ",n.current_page," of ",n.last_page]}),e.jsx(d,{variant:"secondary",size:"sm",onClick:()=>j(n.current_page+1),disabled:n.current_page===n.last_page,children:e.jsx(oe,{className:"w-4 h-4"})})]})]})]})},rr=async()=>(await F.get("/admin/profile")).data,nr=async s=>(await F.put("/admin/profile",s)).data,ir=async s=>(await F.put("/admin/profile/password",s)).data,lr=ae({name:E().min(1,"Name is required"),email:E().email("Invalid email").optional().or(Oe("")),phone:E().optional().or(Oe(""))}),cr=ae({current_password:E().min(1,"Current password is required"),password:E().min(8,"Password must be at least 8 characters"),password_confirmation:E()}).refine(s=>s.password===s.password_confirmation,{message:"Passwords don't match",path:["password_confirmation"]}),or=()=>{const{refreshUser:s}=ne(),[t,a]=m.useState(!0),[r,n]=m.useState(!1),[i,x]=m.useState(!1),[c,j]=m.useState(null),o=Y({resolver:te(lr)}),u=Y({resolver:te(cr)});m.useEffect(()=>{(async()=>{try{const p=await rr();j(p.data),o.reset({name:p.data.name,email:p.data.email||"",phone:p.data.phone||""})}catch(p){console.error("Failed to fetch profile:",p),v.error("Failed to load profile")}finally{a(!1)}})()},[]);const N=async g=>{n(!0);try{await nr({name:g.name,email:g.email||void 0,phone:g.phone||void 0}),v.success("Profile updated successfully"),s()}catch(p){const w=p;v.error(w.response?.data?.message||"Failed to update profile")}finally{n(!1)}},y=async g=>{x(!0);try{await ir(g),v.success("Password changed successfully"),u.reset()}catch(p){const w=p;v.error(w.response?.data?.message||"Failed to change password")}finally{x(!1)}};return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(W,{size:"lg"})}):c?e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-[#1e2329]",children:"My Profile"}),e.jsx("p",{className:"text-[#707a8a]",children:"Manage your administrator account"})]}),e.jsx(S,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 sm:gap-6",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-[#fef6d8] flex items-center justify-center flex-shrink-0",children:e.jsx(Pe,{className:"w-10 h-10 sm:w-12 sm:h-12 text-[#f0b90b]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-[#1e2329]",children:c.name}),e.jsxs("p",{className:"text-[#707a8a]",children:["@",c.username]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-2 flex-wrap",children:[e.jsxs(k,{variant:"default",children:[e.jsx(Ye,{className:"w-3 h-3 mr-1 inline"}),c.role]}),e.jsx(k,{variant:c.status==="active"?"success":"warning",children:c.status})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[e.jsx(S,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 sm:p-3 rounded-lg bg-[#fef6d8]",children:e.jsx(ks,{className:"w-5 h-5 sm:w-6 sm:h-6 text-[#f0b90b]"})}),e.jsxs("div",{className:"ml-3 sm:ml-4",children:[e.jsx("p",{className:"text-xs sm:text-sm text-[#707a8a]",children:"Account Created"}),e.jsx("p",{className:"text-sm sm:text-base font-medium text-[#1e2329]",children:B(c.created_at)})]})]})}),e.jsx(S,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 sm:p-3 rounded-lg bg-[#e6f4ff]",children:e.jsx(ve,{className:"w-5 h-5 sm:w-6 sm:h-6 text-[#0070f3]"})}),e.jsxs("div",{className:"ml-3 sm:ml-4",children:[e.jsx("p",{className:"text-xs sm:text-sm text-[#707a8a]",children:"Last Login"}),e.jsx("p",{className:"text-sm sm:text-base font-medium text-[#1e2329]",children:c.last_login_at?B(c.last_login_at):"Never"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs(S,{children:[e.jsx(K,{children:e.jsx(X,{children:"Update Profile"})}),e.jsxs("form",{onSubmit:o.handleSubmit(N),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:"Username"}),e.jsx(O,{value:c.username,disabled:!0}),e.jsx("p",{className:"mt-1 text-xs text-[#b7b9bc]",children:"Username cannot be changed"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(O,{...o.register("name"),error:o.formState.errors.name?.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:"Email"}),e.jsx(O,{type:"email",...o.register("email"),error:o.formState.errors.email?.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:"Phone"}),e.jsx(O,{...o.register("phone"),placeholder:"e.g., 09171234567",error:o.formState.errors.phone?.message})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(d,{type:"submit",isLoading:r,children:"Save Changes"})})]})]}),e.jsxs(S,{children:[e.jsx(K,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fs,{className:"w-5 h-5 text-[#707a8a]"}),e.jsx(X,{children:"Change Password"})]})}),e.jsxs("form",{onSubmit:u.handleSubmit(y),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:["Current Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(O,{type:"password",...u.register("current_password"),error:u.formState.errors.current_password?.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:["New Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(O,{type:"password",...u.register("password"),error:u.formState.errors.password?.message}),e.jsx("p",{className:"mt-1 text-xs text-[#b7b9bc]",children:"Minimum 8 characters"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:["Confirm New Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(O,{type:"password",...u.register("password_confirmation"),error:u.formState.errors.password_confirmation?.message})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(d,{type:"submit",isLoading:i,children:"Change Password"})})]})]})]})]}):e.jsx("div",{className:"text-center py-12 text-[#707a8a]",children:"Failed to load profile"})},dr=()=>{const s=de(),[t,a]=m.useState(!0),[r,n]=m.useState(null);if(m.useEffect(()=>{(async()=>{try{const c=await F.get("/member/dashboard");n(c.data.data)}catch(c){console.error("Failed to fetch dashboard:",c)}finally{a(!1)}})()},[]),m.useEffect(()=>{if(t)return;const x="dashboard_tradingview_widget";if(!document.getElementById(x))return;const j=()=>{window.TradingView&&new window.TradingView.widget({autosize:!0,symbol:"BINANCE:BTCUSDT",interval:"D",timezone:"Asia/Manila",theme:"light",style:"1",locale:"en",toolbar_bg:"#f0b90b",enable_publishing:!1,hide_top_toolbar:!1,hide_legend:!1,save_image:!1,container_id:x,backgroundColor:"#ffffff",gridColor:"#eaecef"})};if(window.TradingView)j();else{const o=document.createElement("script");o.src="https://s3.tradingview.com/tv.js",o.async=!0,o.onload=j,document.head.appendChild(o)}},[t]),t)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(W,{size:"lg"})});const i=[{title:"Total Invested",value:z(r?.total_invested||0),icon:ee,color:"text-[#f0b90b]",bgColor:"bg-[#fef6d8]"},{title:"Interest Earned",value:z(r?.total_interest_earned||0),icon:pe,color:"text-[#03a66d]",bgColor:"bg-[#e6f7f0]"},{title:"Available Balance",value:z(r?.available_balance||0),icon:fe,color:"text-[#0070f3]",bgColor:"bg-[#e6f4ff]"},{title:"Total Withdrawn",value:z(r?.total_withdrawn||0),icon:ve,color:"text-[#c99400]",bgColor:"bg-[#fef6d8]"}];return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-[#1e2329]",children:"Dashboard"}),e.jsx("p",{className:"text-[#707a8a]",children:"Track your investments and earnings"})]}),e.jsxs("div",{className:"flex items-center space-x-3 flex-wrap",children:[e.jsx(d,{onClick:()=>s("/member/topup/new"),children:"Add Funds"}),e.jsx(d,{variant:"secondary",onClick:()=>s("/member/withdraw/new"),children:"Withdraw"})]})]}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:i.map(x=>e.jsx(S,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-3 rounded-lg ${x.bgColor}`,children:e.jsx(x.icon,{className:`w-6 h-6 ${x.color}`})}),e.jsxs("div",{className:"ml-3 sm:ml-4",children:[e.jsx("p",{className:"text-xs sm:text-sm text-[#707a8a]",children:x.title}),e.jsx("p",{className:"text-lg sm:text-xl font-bold text-[#1e2329]",children:x.value})]})]})},x.title))}),e.jsxs(S,{children:[e.jsx(K,{children:e.jsx(X,{children:"Live Market Data"})}),e.jsx("div",{id:"dashboard_tradingview_widget",className:"h-[300px] sm:h-[400px] lg:h-[500px]"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[e.jsxs(S,{className:"lg:col-span-2",children:[e.jsx(K,{children:e.jsx(X,{children:"Your Interest Rate"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl sm:text-4xl font-bold text-[#03a66d]",children:xe(r?.interest_rate||0)}),e.jsx("p",{className:"text-[#707a8a] mt-1",children:"Monthly interest rate"})]}),e.jsxs("div",{className:"sm:text-right",children:[e.jsx("p",{className:"text-[#707a8a]",children:"Active Investments"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-[#1e2329]",children:r?.active_investments||0})]})]}),r?.projections&&r.projections.length>0&&e.jsxs("div",{className:"mt-4 sm:mt-6 pt-4 sm:pt-6 border-t border-[#eaecef]",children:[e.jsx("h4",{className:"text-sm font-medium text-[#707a8a] mb-4",children:"Projected Earnings"}),e.jsx("div",{className:"grid grid-cols-3 gap-2 sm:gap-4",children:r.projections.slice(0,3).map(x=>e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs sm:text-sm text-[#707a8a]",children:x.month}),e.jsxs("p",{className:"text-sm sm:text-lg font-semibold text-[#03a66d]",children:["+",z(x.projected_interest)]})]},x.month))})]})]}),e.jsxs(S,{children:[e.jsx(K,{children:e.jsx(X,{children:"Pending Requests"})}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 bg-[#f5f5f5] rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[#1e2329]",children:"Top-Up Requests"}),e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Awaiting approval"})]}),e.jsx(k,{variant:"warning",children:r?.pending_topups||0})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 bg-[#f5f5f5] rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[#1e2329]",children:"Withdrawal Requests"}),e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Being processed"})]}),e.jsx(k,{variant:"info",children:r?.pending_withdrawal_requests||0})]}),r?.pending_withdrawals?e.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 bg-[#f5f5f5] rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[#1e2329]",children:"Pending Amount"}),e.jsx("p",{className:"text-sm text-[#707a8a]",children:"To be released"})]}),e.jsx("span",{className:"text-[#c99400] font-medium",children:z(r.pending_withdrawals)})]}):null]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs(S,{children:[e.jsx(K,{children:e.jsx(X,{children:"Quick Actions"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs(d,{variant:"secondary",className:"h-auto py-4 flex-col",onClick:()=>s("/member/investments"),children:[e.jsx(ee,{className:"w-6 h-6 mb-2"}),"View Investments"]}),e.jsxs(d,{variant:"secondary",className:"h-auto py-4 flex-col",onClick:()=>s("/member/topup"),children:[e.jsx(pe,{className:"w-6 h-6 mb-2"}),"Top-Up History"]}),e.jsxs(d,{variant:"secondary",className:"h-auto py-4 flex-col",onClick:()=>s("/member/withdraw"),children:[e.jsx(fe,{className:"w-6 h-6 mb-2"}),"Withdrawals"]}),e.jsxs(d,{variant:"secondary",className:"h-auto py-4 flex-col",onClick:()=>s("/member/profile"),children:[e.jsx(ve,{className:"w-6 h-6 mb-2"}),"Profile"]})]})]}),e.jsxs(S,{children:[e.jsxs(K,{children:[e.jsx(X,{children:"Notifications"}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>s("/member/notifications"),children:"View All"})]}),r?.unread_notifications?e.jsxs("div",{className:"text-center py-4",children:[e.jsxs(k,{variant:"info",className:"text-lg px-4 py-2",children:[r.unread_notifications," unread"]}),e.jsx("p",{className:"text-[#707a8a] mt-2",children:"You have unread notifications"})]}):e.jsx("p",{className:"text-[#707a8a] text-center py-4",children:"No new notifications"})]})]})]})},mr=async s=>(await F.get("/member/investments",{params:s})).data,xr=()=>{const[s,t]=m.useState(!0),[a,r]=m.useState([]),[n,i]=m.useState({current_page:1,last_page:1,per_page:15,total:0}),[x,c]=m.useState(void 0),j=m.useMemo(()=>{const y=Array.isArray(a)?a:[];return{total_invested:y.reduce((g,p)=>g+(p.amount||0),0),total_interest_earned:y.reduce((g,p)=>g+(p.interest_earned||0),0),active_investments:y.filter(g=>g.status==="active").length}},[a]),o=async(y=1)=>{t(!0);try{const g={page:y,per_page:15,sort:"created_at",direction:"desc"};x&&(g.status=x);const p=await mr(g);r(Array.isArray(p.data)?p.data:[]),i(p.meta||{current_page:1,last_page:1,per_page:15,total:0})}catch(g){console.error("Failed to fetch investments:",g),v.error("Failed to load investments")}finally{t(!1)}};m.useEffect(()=>{o()},[x]);const u=y=>{switch(y){case"active":return e.jsx(k,{variant:"success",children:"Active"});case"paused":return e.jsx(k,{variant:"warning",children:"Paused"});case"completed":return e.jsx(k,{variant:"default",children:"Completed"});default:return e.jsx(k,{variant:"default",children:y})}},N=Array.isArray(a)?a:[];return s&&N.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(W,{size:"lg"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-[#1e2329]",children:"My Investments"}),e.jsx("p",{className:"text-[#707a8a]",children:"Track your investment portfolio"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6",children:[e.jsx(S,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 sm:p-3 rounded-lg bg-[#fef6d8]",children:e.jsx(ee,{className:"w-5 h-5 sm:w-6 sm:h-6 text-[#f0b90b]"})}),e.jsxs("div",{className:"ml-3 sm:ml-4",children:[e.jsx("p",{className:"text-xs sm:text-sm text-[#707a8a]",children:"Total Invested"}),e.jsx("p",{className:"text-lg sm:text-xl font-bold text-[#1e2329]",children:z(j.total_invested)})]})]})}),e.jsx(S,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 sm:p-3 rounded-lg bg-[#e6f7f0]",children:e.jsx(pe,{className:"w-5 h-5 sm:w-6 sm:h-6 text-[#03a66d]"})}),e.jsxs("div",{className:"ml-3 sm:ml-4",children:[e.jsx("p",{className:"text-xs sm:text-sm text-[#707a8a]",children:"Interest Earned"}),e.jsxs("p",{className:"text-lg sm:text-xl font-bold text-[#03a66d]",children:["+",z(j.total_interest_earned)]})]})]})}),e.jsx(S,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 sm:p-3 rounded-lg bg-[#e6f4ff]",children:e.jsx(Ns,{className:"w-5 h-5 sm:w-6 sm:h-6 text-[#0070f3]"})}),e.jsxs("div",{className:"ml-3 sm:ml-4",children:[e.jsx("p",{className:"text-xs sm:text-sm text-[#707a8a]",children:"Active Investments"}),e.jsx("p",{className:"text-lg sm:text-xl font-bold text-[#1e2329]",children:j.active_investments})]})]})})]}),e.jsx(S,{children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4",children:[e.jsx("span",{className:"text-sm text-[#707a8a]",children:"Filter by status:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(d,{variant:x===void 0?"primary":"secondary",size:"sm",onClick:()=>c(void 0),children:"All"}),e.jsx(d,{variant:x==="active"?"primary":"secondary",size:"sm",onClick:()=>c("active"),children:"Active"}),e.jsx(d,{variant:x==="paused"?"primary":"secondary",size:"sm",onClick:()=>c("paused"),children:"Paused"}),e.jsx(d,{variant:x==="completed"?"primary":"secondary",size:"sm",onClick:()=>c("completed"),children:"Completed"})]})]})}),e.jsx("div",{className:"space-y-3 sm:space-y-4",children:N.length===0?e.jsx(S,{children:e.jsx("div",{className:"text-center py-8 text-[#707a8a]",children:"No investments found. Start by making a top-up request."})}):N.map(y=>e.jsx(S,{children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 flex-wrap",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-[#1e2329]",children:z(y.amount)}),u(y.status)]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[#707a8a]",children:"Interest Rate"}),e.jsx("p",{className:"text-[#1e2329]",children:xe(y.interest_rate)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[#707a8a]",children:"Interest Earned"}),e.jsxs("p",{className:"text-[#03a66d]",children:["+",z(y.interest_earned)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[#707a8a]",children:"Start Date"}),e.jsx("p",{className:"text-[#1e2329]",children:ke(y.start_date)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[#707a8a]",children:"Last Accrual"}),e.jsx("p",{className:"text-[#1e2329]",children:y.last_accrual_date?ke(y.last_accrual_date):"Not yet"})]})]})]}),e.jsxs("div",{className:"md:text-right",children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Current Balance"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-[#1e2329]",children:z(parseFloat(y.amount)+parseFloat(y.interest_earned))})]})]})},y.id))}),n.last_page>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"text-sm text-[#707a8a]",children:[e.jsxs("span",{className:"hidden sm:inline",children:["Showing ",(n.current_page-1)*n.per_page+1," to"," ",Math.min(n.current_page*n.per_page,n.total)," of "]}),n.total," investments"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"secondary",size:"sm",onClick:()=>o(n.current_page-1),disabled:n.current_page===1,children:e.jsx(ce,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-sm text-[#707a8a]",children:["Page ",n.current_page," of ",n.last_page]}),e.jsx(d,{variant:"secondary",size:"sm",onClick:()=>o(n.current_page+1),disabled:n.current_page===n.last_page,children:e.jsx(oe,{className:"w-4 h-4"})})]})]})]})},hr=async s=>(await F.get("/member/topup-requests",{params:s})).data,ur=async s=>(await F.get(`/member/topup-requests/${s}`)).data,pr=async s=>(await F.post("/member/topup-requests",s,{headers:{"Content-Type":"multipart/form-data"}})).data,fr=()=>{const s=de(),[t,a]=m.useState(!0),[r,n]=m.useState([]),[i,x]=m.useState({current_page:1,last_page:1,per_page:15,total:0}),[c,j]=m.useState(void 0),[o,u]=m.useState(null),[N,y]=m.useState(!1),g=async(l=1)=>{a(!0);try{const h={page:l,per_page:15,sort:"created_at",direction:"desc"};c&&(h.status=c);const f=await hr(h);n(f.data),x(f.meta)}catch(h){console.error("Failed to fetch requests:",h),v.error("Failed to load top-up requests")}finally{a(!1)}};m.useEffect(()=>{g()},[c]);const p=async l=>{try{const h=await ur(l.id);u(h.data),y(!0)}catch{v.error("Failed to load request details")}},w=l=>{switch(l){case"pending":return e.jsx(k,{variant:"warning",children:"Pending"});case"approved":return e.jsx(k,{variant:"success",children:"Approved"});case"rejected":return e.jsx(k,{variant:"danger",children:"Rejected"});default:return e.jsx(k,{variant:"default",children:l})}};return t&&r.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(W,{size:"lg"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-[#1e2329]",children:"Top-Up History"}),e.jsx("p",{className:"text-[#707a8a]",children:"View your top-up request history"})]}),e.jsxs(d,{onClick:()=>s("/member/topup/new"),children:[e.jsx(De,{className:"w-5 h-5 mr-2"}),"New Top-Up"]})]}),e.jsx(S,{children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4",children:[e.jsx("span",{className:"text-sm text-[#707a8a]",children:"Filter by status:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(d,{variant:c===void 0?"primary":"secondary",size:"sm",onClick:()=>j(void 0),children:"All"}),e.jsx(d,{variant:c==="pending"?"primary":"secondary",size:"sm",onClick:()=>j("pending"),children:"Pending"}),e.jsx(d,{variant:c==="approved"?"primary":"secondary",size:"sm",onClick:()=>j("approved"),children:"Approved"}),e.jsx(d,{variant:c==="rejected"?"primary":"secondary",size:"sm",onClick:()=>j("rejected"),children:"Rejected"})]})]})}),e.jsxs(S,{padding:"none",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-[#eaecef]",children:[e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"Date"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"Amount"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a] hidden sm:table-cell",children:"Method"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"Status"}),e.jsx("th",{className:"text-right px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-[#2d2d3a]",children:r.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 sm:px-6 py-12 text-center text-[#707a8a]",children:"No top-up requests yet"})}):r.map(l=>e.jsxs("tr",{className:"hover:bg-[#f5f5f5] transition-colors",children:[e.jsx("td",{className:"px-4 sm:px-6 py-4 text-[#474d57] text-sm",children:B(l.created_at)}),e.jsx("td",{className:"px-4 sm:px-6 py-4 text-[#1e2329] font-medium",children:z(l.amount)}),e.jsx("td",{className:"px-4 sm:px-6 py-4 text-[#474d57] hidden sm:table-cell",children:l.payment_method||"N/A"}),e.jsx("td",{className:"px-4 sm:px-6 py-4",children:w(l.status)}),e.jsx("td",{className:"px-4 sm:px-6 py-4",children:e.jsx("div",{className:"flex items-center justify-end",children:e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>p(l),title:"View Details",children:e.jsx(je,{className:"w-4 h-4"})})})})]},l.id))})]})}),i.last_page>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 sm:px-6 py-4 border-t border-[#eaecef]",children:[e.jsxs("div",{className:"text-sm text-[#707a8a]",children:[e.jsxs("span",{className:"hidden sm:inline",children:["Showing ",(i.current_page-1)*i.per_page+1," to"," ",Math.min(i.current_page*i.per_page,i.total)," of "]}),i.total," requests"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"secondary",size:"sm",onClick:()=>g(i.current_page-1),disabled:i.current_page===1,children:e.jsx(ce,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-sm text-[#707a8a]",children:["Page ",i.current_page," of ",i.last_page]}),e.jsx(d,{variant:"secondary",size:"sm",onClick:()=>g(i.current_page+1),disabled:i.current_page===i.last_page,children:e.jsx(oe,{className:"w-4 h-4"})})]})]})]}),e.jsx(Z,{isOpen:N,onClose:()=>{y(!1),u(null)},title:"Top-Up Request Details",size:"lg",children:o&&e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Request ID"}),e.jsxs("p",{className:"text-[#1e2329] font-mono",children:["#",o.id]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Status"}),e.jsx("div",{className:"mt-1",children:w(o.status)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Amount"}),e.jsx("p",{className:"text-[#1e2329] text-lg sm:text-xl font-bold",children:z(o.amount)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Payment Method"}),e.jsx("p",{className:"text-[#1e2329]",children:o.payment_method||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Submitted"}),e.jsx("p",{className:"text-[#1e2329]",children:B(o.created_at)})]})]}),o.notes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Notes"}),e.jsx("p",{className:"text-[#1e2329] mt-1",children:o.notes})]}),o.proof_of_payment_url&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a] mb-2",children:"Proof of Payment"}),e.jsx("a",{href:o.proof_of_payment_url,target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsxs("div",{className:"relative bg-[#f5f5f5] rounded-lg overflow-hidden",children:[e.jsx("img",{src:o.proof_of_payment_url,alt:"Proof of payment",className:"max-h-64 w-full object-contain"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 opacity-0 hover:opacity-100 transition-opacity",children:e.jsx(_s,{className:"w-8 h-8 text-[#1e2329]"})})]})})]}),o.status!=="pending"&&e.jsxs("div",{className:"pt-4 border-t border-[#eaecef]",children:[o.processed_at&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Processed at"}),e.jsx("p",{className:"text-[#1e2329]",children:B(o.processed_at)})]}),o.rejection_reason&&e.jsxs("div",{className:"p-4 bg-[#fce8eb] border border-[#cf304a]/30 rounded-lg",children:[e.jsx("p",{className:"text-sm text-[#cf304a] font-medium",children:"Rejection Reason"}),e.jsx("p",{className:"text-[#1e2329] mt-1",children:o.rejection_reason})]}),o.admin_remarks&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Admin Remarks"}),e.jsx("p",{className:"text-[#1e2329] mt-1",children:o.admin_remarks})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(d,{variant:"secondary",onClick:()=>{y(!1),u(null)},children:"Close"})})]})})]})},jr=ae({amount:ye().min(100,"Minimum amount is USD 100").max(1e6,"Maximum amount is USD 1,000,000"),payment_method:E().optional(),notes:E().max(500,"Notes cannot exceed 500 characters").optional()}),gr=()=>{const s=de(),[t,a]=m.useState(!1),[r,n]=m.useState(null),[i,x]=m.useState(null),{register:c,handleSubmit:j,watch:o,formState:{errors:u}}=Y({resolver:te(jr),defaultValues:{amount:1e3,payment_method:"Wire Transfer"}}),N=o("amount"),y=w=>{const l=w.target.files?.[0];if(l){if(l.size>5*1024*1024){v.error("File size must be less than 5MB");return}if(!l.type.startsWith("image/")){v.error("Please upload an image file");return}n(l);const h=new FileReader;h.onload=()=>x(h.result),h.readAsDataURL(l)}},g=()=>{n(null),x(null)},p=async w=>{if(!r){v.error("Please upload proof of payment");return}a(!0);try{const l=new FormData;l.append("amount",w.amount.toString()),w.payment_method&&l.append("payment_method",w.payment_method),w.notes&&l.append("notes",w.notes),l.append("proof_of_payment",r),await pr(l),v.success("Top-up request submitted successfully"),s("/member/topup")}catch(l){const f=l.response?.data?.message||"Failed to submit top-up request";v.error(f)}finally{a(!1)}};return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx(d,{variant:"ghost",onClick:()=>s("/member/topup"),children:e.jsx(Le,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-[#1e2329]",children:"New Top-Up"}),e.jsx("p",{className:"text-[#707a8a]",children:"Submit a new top-up request"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(S,{children:e.jsxs("form",{onSubmit:j(p),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:["Amount (USD) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(O,{type:"number",placeholder:"Enter amount",...c("amount"),error:u.amount?.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:"Payment Method"}),e.jsxs("select",{...c("payment_method"),className:"w-full px-4 py-2 bg-white border border-[#eaecef] rounded-lg text-[#1e2329] focus:outline-none focus:ring-2 focus:ring-[#f0b90b]",children:[e.jsx("option",{value:"Wire Transfer",children:"Wire Transfer"}),e.jsx("option",{value:"Crypto - TRC 20",children:"Crypto - TRC 20"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:["Proof of Payment ",e.jsx("span",{className:"text-red-500",children:"*"})]}),i?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:i,alt:"Proof preview",className:"max-h-64 w-full object-contain bg-[#f5f5f5] rounded-lg"}),e.jsx("button",{type:"button",onClick:g,className:"absolute top-2 right-2 p-1 bg-red-600 rounded-full text-[#1e2329] hover:bg-red-700 transition-colors",children:e.jsx(Fe,{className:"w-5 h-5"})})]}):e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-48 border-2 border-dashed border-[#eaecef] rounded-lg cursor-pointer hover:border-[#f0b90b] transition-colors bg-[#f5f5f5]",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(rt,{className:"w-10 h-10 text-[#707a8a] mb-3"}),e.jsxs("p",{className:"mb-2 text-sm text-[#707a8a]",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),e.jsx("p",{className:"text-xs text-[#b7b9bc]",children:"PNG, JPG or GIF (max 5MB)"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:y,className:"hidden"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:"Notes (optional)"}),e.jsx("textarea",{...c("notes"),rows:3,className:"w-full px-4 py-2 bg-white border border-[#eaecef] rounded-lg text-[#1e2329] placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#f0b90b]",placeholder:"Any additional information..."}),u.notes&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.notes.message})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsx(d,{type:"button",variant:"secondary",onClick:()=>s("/member/topup"),className:"w-full sm:w-auto",children:"Cancel"}),e.jsx(d,{type:"submit",isLoading:t,className:"w-full sm:w-auto",children:"Submit Request"})]})]})})}),e.jsx("div",{children:e.jsxs(S,{children:[e.jsx(K,{children:e.jsx(X,{children:"Summary"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[#707a8a]",children:"Top-Up Amount"}),e.jsx("span",{className:"text-[#1e2329] font-medium",children:z(N||0)})]}),e.jsx("div",{className:"pt-4 border-t border-[#eaecef]",children:e.jsx("p",{className:"text-sm text-[#707a8a]",children:"After submitting your request, an admin will review your proof of payment and approve or reject your top-up. Once approved, the amount will be added to your investment balance."})})]})]})})]})]})},br=async s=>(await F.get("/member/withdrawal-requests",{params:s})).data,vr=async s=>(await F.get(`/member/withdrawal-requests/${s}`)).data,yr=async s=>(await F.post("/member/withdrawal-requests",s)).data,Nr=async()=>(await F.get("/member/withdrawal-requests/limits")).data,wr=()=>{const s=de(),[t,a]=m.useState(!0),[r,n]=m.useState([]),[i,x]=m.useState({current_page:1,last_page:1,per_page:15,total:0}),[c,j]=m.useState(void 0),[o,u]=m.useState(null),[N,y]=m.useState(!1),g=async(l=1)=>{a(!0);try{const h={page:l,per_page:15,sort:"created_at",direction:"desc"};c&&(h.status=c);const f=await br(h);n(f.data),x(f.meta)}catch(h){console.error("Failed to fetch requests:",h),v.error("Failed to load withdrawal requests")}finally{a(!1)}};m.useEffect(()=>{g()},[c]);const p=async l=>{try{const h=await vr(l.id);u(h.data),y(!0)}catch{v.error("Failed to load request details")}},w=l=>{switch(l){case"pending":return e.jsx(k,{variant:"warning",children:"Pending"});case"approved":return e.jsx(k,{variant:"info",children:"Approved"});case"paid":return e.jsx(k,{variant:"success",children:"Paid"});case"rejected":return e.jsx(k,{variant:"danger",children:"Rejected"});default:return e.jsx(k,{variant:"default",children:l})}};return t&&r.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(W,{size:"lg"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-[#1e2329]",children:"Withdrawal History"}),e.jsx("p",{className:"text-[#707a8a]",children:"View your withdrawal request history"})]}),e.jsxs(d,{onClick:()=>s("/member/withdraw/new"),children:[e.jsx(De,{className:"w-5 h-5 mr-2"}),"New Withdrawal"]})]}),e.jsx(S,{children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsx("span",{className:"text-sm text-[#707a8a]",children:"Filter by status:"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(d,{variant:c===void 0?"primary":"secondary",size:"sm",onClick:()=>j(void 0),children:"All"}),e.jsx(d,{variant:c==="pending"?"primary":"secondary",size:"sm",onClick:()=>j("pending"),children:"Pending"}),e.jsx(d,{variant:c==="approved"?"primary":"secondary",size:"sm",onClick:()=>j("approved"),children:"Approved"}),e.jsx(d,{variant:c==="paid"?"primary":"secondary",size:"sm",onClick:()=>j("paid"),children:"Paid"}),e.jsx(d,{variant:c==="rejected"?"primary":"secondary",size:"sm",onClick:()=>j("rejected"),children:"Rejected"})]})]})}),e.jsxs(S,{padding:"none",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-[#eaecef]",children:[e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"Date"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"Amount"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a] hidden sm:table-cell",children:"Destination"}),e.jsx("th",{className:"text-left px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"Status"}),e.jsx("th",{className:"text-right px-4 sm:px-6 py-4 text-sm font-medium text-[#707a8a]",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-[#2d2d3a]",children:r.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 sm:px-6 py-12 text-center text-[#707a8a]",children:"No withdrawal requests yet"})}):r.map(l=>e.jsxs("tr",{className:"hover:bg-[#f5f5f5] transition-colors",children:[e.jsx("td",{className:"px-4 sm:px-6 py-4 text-[#474d57] text-sm",children:B(l.created_at)}),e.jsx("td",{className:"px-4 sm:px-6 py-4 text-[#1e2329] font-medium",children:z(l.amount)}),e.jsx("td",{className:"px-4 sm:px-6 py-4 hidden sm:table-cell",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-[#1e2329]",children:l.destination_type==="crypto_trc20"?"Crypto TRC 20":l.bank_name}),e.jsx("div",{className:"text-sm text-[#707a8a]",children:l.account_number})]})}),e.jsx("td",{className:"px-4 sm:px-6 py-4",children:w(l.status)}),e.jsx("td",{className:"px-4 sm:px-6 py-4",children:e.jsx("div",{className:"flex items-center justify-end",children:e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>p(l),title:"View Details",children:e.jsx(je,{className:"w-4 h-4"})})})})]},l.id))})]})}),i.last_page>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 sm:px-6 py-4 border-t border-[#eaecef]",children:[e.jsxs("div",{className:"text-sm text-[#707a8a]",children:[e.jsxs("span",{className:"hidden sm:inline",children:["Showing ",(i.current_page-1)*i.per_page+1," to"," ",Math.min(i.current_page*i.per_page,i.total)," of "]}),i.total," requests"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"secondary",size:"sm",onClick:()=>g(i.current_page-1),disabled:i.current_page===1,children:e.jsx(ce,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-sm text-[#707a8a]",children:["Page ",i.current_page," of ",i.last_page]}),e.jsx(d,{variant:"secondary",size:"sm",onClick:()=>g(i.current_page+1),disabled:i.current_page===i.last_page,children:e.jsx(oe,{className:"w-4 h-4"})})]})]})]}),e.jsx(Z,{isOpen:N,onClose:()=>{y(!1),u(null)},title:"Withdrawal Request Details",size:"lg",children:o&&e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Request ID"}),e.jsxs("p",{className:"text-[#1e2329] font-mono",children:["#",o.id]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Status"}),e.jsx("div",{className:"mt-1",children:w(o.status)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Amount"}),e.jsx("p",{className:"text-[#1e2329] text-lg sm:text-xl font-bold",children:z(o.amount)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Submitted"}),e.jsx("p",{className:"text-[#1e2329]",children:B(o.created_at)})]})]}),e.jsxs("div",{className:"p-3 sm:p-4 bg-[#f5f5f5] rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-[#707a8a] mb-3",children:"Destination Details"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Type"}),e.jsx("p",{className:"text-[#1e2329]",children:o.destination_type==="crypto_trc20"?"Crypto TRC 20":"Bank Transfer"})]}),o.destination_type==="bank"&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Bank"}),e.jsx("p",{className:"text-[#1e2329]",children:o.bank_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Account Name"}),e.jsx("p",{className:"text-[#1e2329]",children:o.account_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Account Number"}),e.jsx("p",{className:"text-[#1e2329] font-mono",children:o.account_number})]})]})]}),o.status!=="pending"&&e.jsxs("div",{className:"pt-4 border-t border-[#eaecef]",children:[o.processed_at&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Processed at"}),e.jsx("p",{className:"text-[#1e2329]",children:B(o.processed_at)})]}),o.rejection_reason&&e.jsxs("div",{className:"p-4 bg-[#fce8eb] border border-[#cf304a]/30 rounded-lg",children:[e.jsx("p",{className:"text-sm text-[#cf304a] font-medium",children:"Rejection Reason"}),e.jsx("p",{className:"text-[#1e2329] mt-1",children:o.rejection_reason})]}),o.payout_proof_url&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-[#707a8a] mb-2",children:"Payout Proof"}),e.jsx("a",{href:o.payout_proof_url,target:"_blank",rel:"noopener noreferrer",className:"text-[#f0b90b] hover:text-[#c99400]",children:"View Proof"})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(d,{variant:"secondary",onClick:()=>{y(!1),u(null)},children:"Close"})})]})})]})},_r=()=>{const s=de(),[t,a]=m.useState(!0),[r,n]=m.useState(!1),[i,x]=m.useState(null),{register:c,handleSubmit:j,watch:o,setError:u,formState:{errors:N}}=Y({defaultValues:{destination_type:"crypto_trc20"}}),y=o("destination_type"),g=o("amount");m.useEffect(()=>{(async()=>{try{const l=await Nr();x(l.data)}catch{v.error("Failed to load withdrawal limits")}finally{a(!1)}})()},[]);const p=async w=>{if(i){if(w.amount<i.min_amount){u("amount",{type:"manual",message:`Minimum withdrawal is ${z(i.min_amount)}`});return}if(w.amount>i.max_amount){u("amount",{type:"manual",message:`Maximum withdrawal is ${z(i.max_amount)}`});return}if(w.amount>i.available_balance){u("amount",{type:"manual",message:`Amount exceeds available balance (${z(i.available_balance)})`});return}if(!w.account_name?.trim()){u("account_name",{type:"manual",message:"Account name is required"});return}if(!w.account_number?.trim()){u("account_number",{type:"manual",message:"Wallet address / Account number is required"});return}if(w.destination_type==="bank"&&!w.bank_name?.trim()){u("bank_name",{type:"manual",message:"Bank name is required"});return}n(!0);try{await yr({...w,bank_name:w.destination_type==="bank"?w.bank_name:void 0}),v.success("Withdrawal request submitted successfully"),s("/member/withdraw")}catch(l){const f=l.response?.data?.message||"Failed to submit withdrawal request";v.error(f)}finally{n(!1)}}};return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(W,{size:"lg"})}):i?.withdrawal_frozen?e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx(d,{variant:"ghost",onClick:()=>s("/member/withdraw"),children:e.jsx(Le,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-[#1e2329]",children:"New Withdrawal"}),e.jsx("p",{className:"text-[#707a8a]",children:"Submit a new withdrawal request"})]})]}),e.jsx(S,{children:e.jsxs("div",{className:"flex items-center gap-4 text-[#c99400]",children:[e.jsx(nt,{className:"w-12 h-12"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Withdrawals Frozen"}),e.jsx("p",{className:"text-[#707a8a] mt-1",children:"Your withdrawal capability has been temporarily frozen. Please contact support for more information."})]})]})})]}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx(d,{variant:"ghost",onClick:()=>s("/member/withdraw"),children:e.jsx(Le,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-[#1e2329]",children:"New Withdrawal"}),e.jsx("p",{className:"text-[#707a8a]",children:"Submit a new withdrawal request"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(S,{children:e.jsxs("form",{onSubmit:j(p),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:["Amount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(O,{type:"number",placeholder:"Enter amount",...c("amount"),error:N.amount?.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:["Destination Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"crypto_trc20",...c("destination_type"),className:"w-4 h-4 text-[#f0b90b] bg-white border-[#eaecef] focus:ring-[#f0b90b]"}),e.jsx("span",{className:"text-[#1e2329]",children:"Crypto - TRC 20"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"bank",...c("destination_type"),className:"w-4 h-4 text-[#f0b90b] bg-white border-[#eaecef] focus:ring-[#f0b90b]"}),e.jsx("span",{className:"text-[#1e2329]",children:"Bank Transfer"})]})]})]}),y==="bank"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:["Bank Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...c("bank_name"),className:"w-full px-4 py-2 bg-white border border-[#eaecef] rounded-lg text-[#1e2329] focus:outline-none focus:ring-2 focus:ring-[#f0b90b]",children:[e.jsx("option",{value:"",children:"Select a bank"}),e.jsx("option",{value:"BDO",children:"BDO"}),e.jsx("option",{value:"BPI",children:"BPI"}),e.jsx("option",{value:"Metrobank",children:"Metrobank"}),e.jsx("option",{value:"UnionBank",children:"UnionBank"}),e.jsx("option",{value:"LandBank",children:"LandBank"}),e.jsx("option",{value:"PNB",children:"PNB"}),e.jsx("option",{value:"Security Bank",children:"Security Bank"}),e.jsx("option",{value:"RCBC",children:"RCBC"}),e.jsx("option",{value:"EastWest",children:"EastWest"}),e.jsx("option",{value:"Other",children:"Other"})]}),N.bank_name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.bank_name.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:[y==="crypto_trc20"?"Wallet Name":"Account Name"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(O,{placeholder:y==="crypto_trc20"?"Enter wallet name":"Enter account holder name",...c("account_name"),error:N.account_name?.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:[y==="crypto_trc20"?"TRC 20 Wallet Address":"Account Number"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(O,{placeholder:y==="crypto_trc20"?"e.g., TXyz123...":"Enter account number",...c("account_number"),error:N.account_number?.message}),y==="crypto_trc20"&&e.jsx("p",{className:"mt-1 text-xs text-[#707a8a]",children:"Please ensure you enter a valid TRC 20 (TRON) wallet address"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsx(d,{type:"button",variant:"secondary",onClick:()=>s("/member/withdraw"),className:"w-full sm:w-auto",children:"Cancel"}),e.jsx(d,{type:"submit",isLoading:r,className:"w-full sm:w-auto",children:"Submit Request"})]})]})})}),e.jsxs("div",{children:[e.jsxs(S,{children:[e.jsx(K,{children:e.jsx(X,{children:"Summary"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[#707a8a]",children:"Available Balance"}),e.jsx("span",{className:"text-[#1e2329] font-medium",children:z(i?.available_balance||0)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[#707a8a]",children:"Withdrawal Amount"}),e.jsx("span",{className:"text-[#1e2329] font-medium",children:z(g||0)})]}),e.jsx("div",{className:"pt-4 border-t border-[#eaecef]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[#707a8a]",children:"Remaining Balance"}),e.jsx("span",{className:"text-[#1e2329] font-bold",children:z(Math.max(0,(i?.available_balance||0)-(g||0)))})]})})]})]}),e.jsxs(S,{className:"mt-4 sm:mt-6",children:[e.jsx(K,{children:e.jsx(X,{children:"Important Notes"})}),e.jsxs("ul",{className:"space-y-2 text-sm text-[#707a8a]",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#f0b90b]",children:"*"}),"Withdrawals are processed within 24-48 hours"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#f0b90b]",children:"*"}),"Please ensure wallet/account details are correct"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#f0b90b]",children:"*"}),"Crypto TRC 20 withdrawals are typically faster"]})]})]})]})]})]})},Sr=async s=>(await F.get("/member/notifications",{params:s})).data,Cr=async s=>(await F.put(`/member/notifications/${s}/read`)).data,kr=async()=>(await F.put("/member/notifications/read-all")).data,Fr=async s=>(await F.delete(`/member/notifications/${s}`)).data,Rr=async()=>(await F.delete("/member/notifications")).data,Pr=()=>{const[s,t]=m.useState(!0),[a,r]=m.useState([]),[n,i]=m.useState({current_page:1,last_page:1,per_page:15,total:0}),[x,c]=m.useState(!1),j=async(l=1)=>{t(!0);try{const f=await Sr({page:l,per_page:15,unread_only:x||void 0});r(f.data||[]),i(f.meta)}catch(h){console.error("Failed to fetch notifications:",h),v.error("Failed to load notifications")}finally{t(!1)}};m.useEffect(()=>{j()},[x]);const o=async l=>{if(!l.read_at)try{await Cr(l.id),r(h=>h.map(f=>f.id===l.id?{...f,read_at:new Date().toISOString()}:f))}catch{v.error("Failed to mark as read")}},u=async()=>{try{await kr(),r(l=>l.map(h=>({...h,read_at:h.read_at||new Date().toISOString()}))),v.success("All notifications marked as read")}catch{v.error("Failed to mark all as read")}},N=async(l,h)=>{l.stopPropagation();try{await Fr(h.id),r(f=>f.filter(R=>R.id!==h.id)),i(f=>({...f,total:f.total-1})),v.success("Notification deleted")}catch{v.error("Failed to delete notification")}},y=async()=>{if(confirm("Are you sure you want to clear all notifications? This cannot be undone."))try{await Rr(),r([]),i({current_page:1,last_page:1,per_page:15,total:0}),v.success("All notifications cleared")}catch{v.error("Failed to clear notifications")}},g=l=>{switch(l){case"topup_submitted":case"topup_approved":case"topup_rejected":return e.jsx(pe,{className:"w-5 h-5"});case"withdrawal_submitted":case"withdrawal_approved":case"withdrawal_paid":case"withdrawal_rejected":return e.jsx(fe,{className:"w-5 h-5"});case"account_status_changed":case"interest_rate_changed":case"withdrawal_frozen":case"withdrawal_unfrozen":return e.jsx(Cs,{className:"w-5 h-5"});default:return e.jsx(Ss,{className:"w-5 h-5"})}},p=l=>l.includes("approved")||l.includes("paid")||l.includes("unfrozen")?"bg-[#e6f7f0] text-[#03a66d]":l.includes("rejected")||l.includes("frozen")?"bg-[#fce8eb] text-[#cf304a]":l.includes("submitted")||l.includes("pending")?"bg-[#fef6d8] text-[#c99400]":"bg-[#fef6d8] text-[#f0b90b]",w=a.filter(l=>!l.read_at).length;return s&&a.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(W,{size:"lg"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-[#1e2329]",children:"Notifications"}),e.jsx("p",{className:"text-[#707a8a]",children:"Stay updated on your account activity"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[w>0&&e.jsxs(d,{variant:"secondary",onClick:u,children:[e.jsx(Ee,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Mark All as Read"}),e.jsx("span",{className:"sm:hidden",children:"Mark Read"})]}),a.length>0&&e.jsxs(d,{variant:"danger",onClick:y,children:[e.jsx(_e,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Clear All"}),e.jsx("span",{className:"sm:hidden",children:"Clear"})]})]})]}),e.jsx(S,{children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4",children:[e.jsx("span",{className:"text-sm text-[#707a8a]",children:"Show:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(d,{variant:x?"secondary":"primary",size:"sm",onClick:()=>c(!1),children:"All"}),e.jsxs(d,{variant:x?"primary":"secondary",size:"sm",onClick:()=>c(!0),children:["Unread Only",w>0&&e.jsx(k,{variant:"warning",className:"ml-2",children:w})]})]})]})}),e.jsx("div",{className:"space-y-3",children:a.length===0?e.jsx(S,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-[#707a8a]",children:[e.jsx(Re,{className:"w-12 h-12 mb-4"}),e.jsx("p",{children:"No notifications yet"})]})}):a.map(l=>e.jsx(S,{className:`cursor-pointer transition-colors ${l.read_at?"":"border-l-4 border-l-[#f0b90b]"}`,onClick:()=>o(l),children:e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:`p-2 rounded-lg flex-shrink-0 ${p(l.type)}`,children:g(l.type)}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 sm:gap-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-[#1e2329] font-medium text-sm sm:text-base",children:l.title}),e.jsx("p",{className:"text-[#707a8a] mt-1 text-sm",children:l.message})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("span",{className:"text-xs text-[#b7b9bc]",children:ts(l.created_at)}),!l.read_at&&e.jsx("div",{className:"w-2 h-2 bg-[#f0b90b] rounded-full"}),e.jsx("button",{onClick:h=>N(h,l),className:"p-1 text-[#b7b9bc] hover:text-[#cf304a] transition-colors",title:"Delete notification",children:e.jsx(_e,{className:"w-4 h-4"})})]})]})})]})},l.id))}),n.last_page>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"text-sm text-[#707a8a]",children:[e.jsxs("span",{className:"hidden sm:inline",children:["Showing ",(n.current_page-1)*n.per_page+1," to"," ",Math.min(n.current_page*n.per_page,n.total)," of "]}),n.total," notifications"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"secondary",size:"sm",onClick:()=>j(n.current_page-1),disabled:n.current_page===1,children:e.jsx(ce,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-sm text-[#707a8a]",children:["Page ",n.current_page," of ",n.last_page]}),e.jsx(d,{variant:"secondary",size:"sm",onClick:()=>j(n.current_page+1),disabled:n.current_page===n.last_page,children:e.jsx(oe,{className:"w-4 h-4"})})]})]})]})},Ar=async()=>(await F.get("/member/profile")).data,Ir=async s=>(await F.put("/member/profile",s)).data,Mr=async s=>(await F.put("/member/profile/password",s)).data,zr=ae({name:E().min(1,"Name is required"),email:E().email("Invalid email").optional().or(Oe("")),phone:E().optional().or(Oe(""))}),Lr=ae({current_password:E().min(1,"Current password is required"),password:E().min(8,"Password must be at least 8 characters"),password_confirmation:E()}).refine(s=>s.password===s.password_confirmation,{message:"Passwords don't match",path:["password_confirmation"]}),Or=()=>{const{refreshUser:s}=ne(),[t,a]=m.useState(!0),[r,n]=m.useState(!1),[i,x]=m.useState(!1),[c,j]=m.useState(null),o=Y({resolver:te(zr)}),u=Y({resolver:te(Lr)});m.useEffect(()=>{(async()=>{try{const p=await Ar();j(p.data),o.reset({name:p.data.name,email:p.data.email||"",phone:p.data.phone||""})}catch(p){console.error("Failed to fetch profile:",p),v.error("Failed to load profile")}finally{a(!1)}})()},[]);const N=async g=>{n(!0);try{await Ir({name:g.name,email:g.email||void 0,phone:g.phone||void 0}),v.success("Profile updated successfully"),s()}catch(p){const w=p;v.error(w.response?.data?.message||"Failed to update profile")}finally{n(!1)}},y=async g=>{x(!0);try{await Mr(g),v.success("Password changed successfully"),u.reset()}catch(p){const w=p;v.error(w.response?.data?.message||"Failed to change password")}finally{x(!1)}};return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(W,{size:"lg"})}):c?e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-[#1e2329]",children:"My Profile"}),e.jsx("p",{className:"text-[#707a8a]",children:"Manage your account information"})]}),e.jsx(S,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 sm:gap-6",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-[#fef6d8] flex items-center justify-center flex-shrink-0",children:e.jsx(Pe,{className:"w-10 h-10 sm:w-12 sm:h-12 text-[#f0b90b]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-[#1e2329]",children:c.name}),e.jsxs("p",{className:"text-[#707a8a]",children:["@",c.username]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-2 flex-wrap",children:[e.jsx(k,{variant:c.status==="active"?"success":"warning",children:c.status}),c.withdrawal_frozen&&e.jsx(k,{variant:"danger",children:"Withdrawals Frozen"})]})]}),e.jsxs("div",{className:"sm:text-right",children:[e.jsx("p",{className:"text-sm text-[#707a8a]",children:"Interest Rate"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-[#03a66d]",children:c.interest_rate!==null?xe(c.interest_rate):"N/A"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[e.jsx(S,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 sm:p-3 rounded-lg bg-[#fef6d8]",children:e.jsx(ee,{className:"w-5 h-5 sm:w-6 sm:h-6 text-[#f0b90b]"})}),e.jsxs("div",{className:"ml-3 sm:ml-4",children:[e.jsx("p",{className:"text-xs sm:text-sm text-[#707a8a]",children:"Total Invested"}),e.jsx("p",{className:"text-base sm:text-lg font-bold text-[#1e2329]",children:z(c.total_invested)})]})]})}),e.jsx(S,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 sm:p-3 rounded-lg bg-[#e6f7f0]",children:e.jsx(pe,{className:"w-5 h-5 sm:w-6 sm:h-6 text-[#03a66d]"})}),e.jsxs("div",{className:"ml-3 sm:ml-4",children:[e.jsx("p",{className:"text-xs sm:text-sm text-[#707a8a]",children:"Interest Earned"}),e.jsxs("p",{className:"text-base sm:text-lg font-bold text-[#03a66d]",children:["+",z(c.total_interest_earned)]})]})]})}),e.jsx(S,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 sm:p-3 rounded-lg bg-[#e6f4ff]",children:e.jsx(fe,{className:"w-5 h-5 sm:w-6 sm:h-6 text-[#0070f3]"})}),e.jsxs("div",{className:"ml-3 sm:ml-4",children:[e.jsx("p",{className:"text-xs sm:text-sm text-[#707a8a]",children:"Available Balance"}),e.jsx("p",{className:"text-base sm:text-lg font-bold text-[#1e2329]",children:z(c.available_balance)})]})]})}),e.jsx(S,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 sm:p-3 rounded-lg bg-[#fef6d8]",children:e.jsx(ks,{className:"w-5 h-5 sm:w-6 sm:h-6 text-[#c99400]"})}),e.jsxs("div",{className:"ml-3 sm:ml-4",children:[e.jsx("p",{className:"text-xs sm:text-sm text-[#707a8a]",children:"Member Since"}),e.jsx("p",{className:"text-base sm:text-lg font-bold text-[#1e2329]",children:B(c.member_since).split(",")[0]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs(S,{children:[e.jsx(K,{children:e.jsx(X,{children:"Update Profile"})}),e.jsxs("form",{onSubmit:o.handleSubmit(N),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:"Username"}),e.jsx(O,{value:c.username,disabled:!0}),e.jsx("p",{className:"mt-1 text-xs text-[#b7b9bc]",children:"Username cannot be changed"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(O,{...o.register("name"),error:o.formState.errors.name?.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:"Email"}),e.jsx(O,{type:"email",...o.register("email"),error:o.formState.errors.email?.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:"Phone"}),e.jsx(O,{...o.register("phone"),placeholder:"e.g., 09171234567",error:o.formState.errors.phone?.message})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(d,{type:"submit",isLoading:r,children:"Save Changes"})})]})]}),e.jsxs(S,{children:[e.jsx(K,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fs,{className:"w-5 h-5 text-[#707a8a]"}),e.jsx(X,{children:"Change Password"})]})}),e.jsxs("form",{onSubmit:u.handleSubmit(y),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:["Current Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(O,{type:"password",...u.register("current_password"),error:u.formState.errors.current_password?.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:["New Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(O,{type:"password",...u.register("password"),error:u.formState.errors.password?.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-[#474d57] mb-1",children:["Confirm New Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(O,{type:"password",...u.register("password_confirmation"),error:u.formState.errors.password_confirmation?.message})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(d,{type:"submit",isLoading:i,children:"Change Password"})})]})]})]})]}):e.jsx("div",{className:"text-center py-12 text-[#707a8a]",children:"Failed to load profile"})},Tr=()=>e.jsxs(mt,{children:[e.jsx(U,{path:"/",element:e.jsx(ia,{})}),e.jsx(U,{path:"/login",element:e.jsx(Ve,{children:e.jsx(ca,{})})}),e.jsx(U,{path:"/register/:code",element:e.jsx(Ve,{children:e.jsx(fs,{})})}),e.jsx(U,{path:"/register",element:e.jsx(Ve,{children:e.jsx(fs,{})})}),e.jsxs(U,{path:"/admin",element:e.jsx(sa,{children:e.jsx(ra,{})}),children:[e.jsx(U,{index:!0,element:e.jsx(be,{to:"dashboard",replace:!0})}),e.jsx(U,{path:"dashboard",element:e.jsx(da,{})}),e.jsx(U,{path:"members",element:e.jsx(pa,{})}),e.jsx(U,{path:"members/:id",element:e.jsx(ya,{})}),e.jsx(U,{path:"topup-requests",element:e.jsx(ka,{})}),e.jsx(U,{path:"withdrawal-requests",element:e.jsx(za,{})}),e.jsx(U,{path:"invitation-links",element:e.jsx($a,{})}),e.jsx(U,{path:"users",element:e.jsx(Wa,{})}),e.jsx(U,{path:"audit-logs",element:e.jsx(Ga,{})}),e.jsx(U,{path:"settings",element:e.jsx(Za,{})}),e.jsx(U,{path:"notifications",element:e.jsx(ar,{})}),e.jsx(U,{path:"profile",element:e.jsx(or,{})})]}),e.jsxs(U,{path:"/member",element:e.jsx(ea,{children:e.jsx(na,{})}),children:[e.jsx(U,{index:!0,element:e.jsx(be,{to:"dashboard",replace:!0})}),e.jsx(U,{path:"dashboard",element:e.jsx(dr,{})}),e.jsx(U,{path:"investments",element:e.jsx(xr,{})}),e.jsx(U,{path:"topup",element:e.jsx(fr,{})}),e.jsx(U,{path:"topup/new",element:e.jsx(gr,{})}),e.jsx(U,{path:"withdraw",element:e.jsx(wr,{})}),e.jsx(U,{path:"withdraw/new",element:e.jsx(_r,{})}),e.jsx(U,{path:"notifications",element:e.jsx(Pr,{})}),e.jsx(U,{path:"profile",element:e.jsx(Or,{})})]}),e.jsx(U,{path:"*",element:e.jsx(be,{to:"/",replace:!0})})]}),Dr=new qt({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}});function Er(){const{isInitialized:s,initialize:t}=ne();return m.useEffect(()=>{t()},[t]),s?e.jsx(Ut,{client:Dr,children:e.jsxs(xt,{children:[e.jsx(Tr,{}),e.jsx(lt,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#ffffff",color:"#1e2329",border:"1px solid #eaecef"},success:{iconTheme:{primary:"#03a66d",secondary:"#ffffff"}},error:{iconTheme:{primary:"#cf304a",secondary:"#ffffff"}}}})]})}):e.jsx("div",{className:"min-h-screen bg-[#fafafa] flex items-center justify-center",children:e.jsx(W,{size:"lg"})})}it.createRoot(document.getElementById("app")).render(e.jsx(we.StrictMode,{children:e.jsx(Er,{})}));
